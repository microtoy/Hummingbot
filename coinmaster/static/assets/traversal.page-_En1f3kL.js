import{c as p,o,b as t,K,aH as Ke,H as ll,Q as ze,I as al,J as $e,l as y,a as l,G as $,L as sl,w as b,i as h,aI as Ne,aJ as Ee,M as ol,n as il,f as Je,aK as nl,S as rl,O as ul,a1 as mt,aL as cl,a3 as dl,aM as ml,d as _t,a7 as yt,ae as Nt,r as f,af as It,aN as tt,g as Ze,F as N,j as x,k as A,ag as Ve,ah as Te,T as xt,v as se,e as ge,m as E,t as J,ai as St,aj as pl,ak as Lt,aO as vt,aB as Tt,ao as pt,aP as lt,an as at,as as fl,ap as vl,aq as $t,ay as gl,at as qe,z as jt,au as _l,aQ as Vt,aR as yl,aS as ft,aT as Ot,aU as xl,aV as bl,aW as hl,aX as wl,aY as Cl,av as kl,aw as Il,aZ as Sl,E as Ll,a8 as $l,a_ as Vl,aE as Ol,a$ as Bl,b0 as Dl}from"./index-CbyJdw3w.js";import{F as zl}from"./index-CPBIGXVz.js";import{w as Bt,x as Nl,s as Tl,_ as Dt,a as jl,c as Pl,e as xe,f as Fl,g as Ul,y as Ml,b as Al,h as Hl,i as Rl,j as El,k as Pt,o as ql,p as Jl,q as Zl,U as Wl,t as Kl,r as Xl,u as Yl,v as Gl}from"./uploadConfigDialog.tmpl-Ba7xXsGA.js";import{c as Ql}from"./index-CbiVW7Hl.js";import{s as Ft,a as ea,b as ta,c as Ut,e as la,f as aa,g as sa,h as oa,l as bt,d as ia,_ as gt,j as na,k as ra}from"./index-B5Cb-c6D.js";import{s as ht,a as wt,b as Ct}from"./index-CdSi96Zj.js";import{a as Mt}from"./index-DAnG4PUT.js";var At={name:"EyeIcon",extends:Ke};function ua(a,r,S,B,W,g){return o(),p("svg",K({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.pti()),r[0]||(r[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.0535499 7.25213C0.208567 7.59162 2.40413 12.4 7 12.4C11.5959 12.4 13.7914 7.59162 13.9465 7.25213C13.9487 7.2471 13.9506 7.24304 13.952 7.24001C13.9837 7.16396 14 7.08239 14 7.00001C14 6.91762 13.9837 6.83605 13.952 6.76001C13.9506 6.75697 13.9487 6.75292 13.9465 6.74788C13.7914 6.4084 11.5959 1.60001 7 1.60001C2.40413 1.60001 0.208567 6.40839 0.0535499 6.74788C0.0512519 6.75292 0.0494023 6.75697 0.048 6.76001C0.0163137 6.83605 0 6.91762 0 7.00001C0 7.08239 0.0163137 7.16396 0.048 7.24001C0.0494023 7.24304 0.0512519 7.2471 0.0535499 7.25213ZM7 11.2C3.664 11.2 1.736 7.92001 1.264 7.00001C1.736 6.08001 3.664 2.80001 7 2.80001C10.336 2.80001 12.264 6.08001 12.736 7.00001C12.264 7.92001 10.336 11.2 7 11.2ZM5.55551 9.16182C5.98308 9.44751 6.48576 9.6 7 9.6C7.68891 9.59789 8.349 9.32328 8.83614 8.83614C9.32328 8.349 9.59789 7.68891 9.59999 7C9.59999 6.48576 9.44751 5.98308 9.16182 5.55551C8.87612 5.12794 8.47006 4.7947 7.99497 4.59791C7.51988 4.40112 6.99711 4.34963 6.49276 4.44995C5.98841 4.55027 5.52513 4.7979 5.16152 5.16152C4.7979 5.52513 4.55027 5.98841 4.44995 6.49276C4.34963 6.99711 4.40112 7.51988 4.59791 7.99497C4.7947 8.47006 5.12794 8.87612 5.55551 9.16182ZM6.2222 5.83594C6.45243 5.6821 6.7231 5.6 7 5.6C7.37065 5.6021 7.72553 5.75027 7.98762 6.01237C8.24972 6.27446 8.39789 6.62934 8.4 7C8.4 7.27689 8.31789 7.54756 8.16405 7.77779C8.01022 8.00802 7.79157 8.18746 7.53575 8.29343C7.27994 8.39939 6.99844 8.42711 6.72687 8.37309C6.4553 8.31908 6.20584 8.18574 6.01005 7.98994C5.81425 7.79415 5.68091 7.54469 5.6269 7.27312C5.57288 7.00155 5.6006 6.72006 5.70656 6.46424C5.81253 6.20842 5.99197 5.98977 6.2222 5.83594Z",fill:"currentColor"},null,-1)]),16)}At.render=ua;var Ht={name:"RefreshIcon",extends:Ke};function ca(a,r,S,B,W,g){return o(),p("svg",K({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.pti()),r[0]||(r[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.77051 5.96336C6.84324 5.99355 6.92127 6.00891 7.00002 6.00854C7.07877 6.00891 7.1568 5.99355 7.22953 5.96336C7.30226 5.93317 7.36823 5.88876 7.42357 5.83273L9.82101 3.43529C9.93325 3.32291 9.99629 3.17058 9.99629 3.01175C9.99629 2.85292 9.93325 2.70058 9.82101 2.5882L7.42357 0.190763C7.3687 0.131876 7.30253 0.0846451 7.22901 0.0518865C7.15549 0.019128 7.07612 0.00151319 6.99564 9.32772e-05C6.91517 -0.00132663 6.83523 0.0134773 6.7606 0.0436218C6.68597 0.0737664 6.61817 0.118634 6.56126 0.175548C6.50435 0.232462 6.45948 0.300257 6.42933 0.374888C6.39919 0.449519 6.38439 0.529456 6.38581 0.609933C6.38722 0.690409 6.40484 0.769775 6.4376 0.843296C6.47036 0.916817 6.51759 0.982986 6.57647 1.03786L7.95103 2.41241H6.99998C5.46337 2.41241 3.98969 3.02283 2.90314 4.10938C1.81659 5.19593 1.20618 6.66961 1.20618 8.20622C1.20618 9.74283 1.81659 11.2165 2.90314 12.3031C3.98969 13.3896 5.46337 14 6.99998 14C8.53595 13.9979 10.0084 13.3868 11.0945 12.3007C12.1806 11.2146 12.7917 9.74218 12.7938 8.20622C12.7938 8.04726 12.7306 7.89481 12.6182 7.78241C12.5058 7.67001 12.3534 7.60686 12.1944 7.60686C12.0355 7.60686 11.883 7.67001 11.7706 7.78241C11.6582 7.89481 11.5951 8.04726 11.5951 8.20622C11.5951 9.11504 11.3256 10.0035 10.8207 10.7591C10.3157 11.5148 9.59809 12.1037 8.75845 12.4515C7.9188 12.7993 6.99489 12.8903 6.10353 12.713C5.21217 12.5357 4.3934 12.0981 3.75077 11.4554C3.10813 10.8128 2.67049 9.99404 2.49319 9.10268C2.31589 8.21132 2.40688 7.2874 2.75468 6.44776C3.10247 5.60811 3.69143 4.89046 4.44709 4.38554C5.20275 3.88063 6.09116 3.61113 6.99998 3.61113H7.95098L6.57647 4.98564C6.46423 5.09802 6.40119 5.25035 6.40119 5.40918C6.40119 5.56801 6.46423 5.72035 6.57647 5.83273C6.63181 5.88876 6.69778 5.93317 6.77051 5.96336Z",fill:"currentColor"},null,-1)]),16)}Ht.render=ca;var Rt={name:"SearchMinusIcon",extends:Ke};function da(a,r,S,B,W,g){return o(),p("svg",K({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.pti()),r[0]||(r[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.0208 12.0411C4.83005 12.0411 3.66604 11.688 2.67596 11.0265C1.68589 10.3649 0.914216 9.42464 0.458534 8.32452C0.00285271 7.22441 -0.116374 6.01388 0.11593 4.84601C0.348235 3.67813 0.921637 2.60537 1.76363 1.76338C2.60562 0.921393 3.67838 0.34799 4.84625 0.115686C6.01412 -0.116618 7.22466 0.00260857 8.32477 0.45829C9.42488 0.913972 10.3652 1.68564 11.0267 2.67572C11.6883 3.66579 12.0414 4.8298 12.0414 6.02056C12.0395 7.41563 11.5542 8.76029 10.6783 9.8305L13.8244 12.9765C13.9367 13.089 13.9997 13.2414 13.9997 13.4003C13.9997 13.5592 13.9367 13.7116 13.8244 13.8241C13.769 13.8801 13.703 13.9245 13.6302 13.9548C13.5575 13.985 13.4794 14.0003 13.4006 14C13.3218 14.0003 13.2437 13.985 13.171 13.9548C13.0982 13.9245 13.0322 13.8801 12.9768 13.8241L9.83082 10.678C8.76059 11.5539 7.4159 12.0393 6.0208 12.0411ZM6.0208 1.20731C5.07199 1.20731 4.14449 1.48867 3.35559 2.0158C2.56669 2.54292 1.95181 3.29215 1.58872 4.16874C1.22562 5.04532 1.13062 6.00989 1.31572 6.94046C1.50083 7.87104 1.95772 8.72583 2.62863 9.39674C3.29954 10.0676 4.15433 10.5245 5.0849 10.7096C6.01548 10.8947 6.98005 10.7997 7.85663 10.4367C8.73322 10.0736 9.48244 9.45868 10.0096 8.66978C10.5367 7.88088 10.8181 6.95337 10.8181 6.00457C10.8181 4.73226 10.3126 3.51206 9.41297 2.6124C8.51331 1.71274 7.29311 1.20731 6.0208 1.20731ZM4.00591 6.60422H8.00362C8.16266 6.60422 8.31518 6.54104 8.42764 6.42859C8.5401 6.31613 8.60328 6.1636 8.60328 6.00456C8.60328 5.84553 8.5401 5.693 8.42764 5.58054C8.31518 5.46809 8.16266 5.40491 8.00362 5.40491H4.00591C3.84687 5.40491 3.69434 5.46809 3.58189 5.58054C3.46943 5.693 3.40625 5.84553 3.40625 6.00456C3.40625 6.1636 3.46943 6.31613 3.58189 6.42859C3.69434 6.54104 3.84687 6.60422 4.00591 6.60422Z",fill:"currentColor"},null,-1)]),16)}Rt.render=da;var Et={name:"SearchPlusIcon",extends:Ke};function ma(a,r,S,B,W,g){return o(),p("svg",K({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.pti()),r[0]||(r[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.67596 11.0265C3.66604 11.688 4.83005 12.0411 6.0208 12.0411C6.81143 12.0411 7.59432 11.8854 8.32477 11.5828C8.86999 11.357 9.37802 11.0526 9.83311 10.6803L12.9768 13.8241C13.0322 13.8801 13.0982 13.9245 13.171 13.9548C13.2437 13.985 13.3218 14.0003 13.4006 14C13.4794 14.0003 13.5575 13.985 13.6302 13.9548C13.703 13.9245 13.769 13.8801 13.8244 13.8241C13.9367 13.7116 13.9997 13.5592 13.9997 13.4003C13.9997 13.2414 13.9367 13.089 13.8244 12.9765L10.6806 9.8328C11.0529 9.37773 11.3572 8.86972 11.5831 8.32452C11.8856 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0267 2.67572C10.3652 1.68564 9.42488 0.913972 8.32477 0.45829C7.22466 0.00260857 6.01412 -0.116618 4.84625 0.115686C3.67838 0.34799 2.60562 0.921393 1.76363 1.76338C0.921637 2.60537 0.348235 3.67813 0.11593 4.84601C-0.116374 6.01388 0.00285271 7.22441 0.458534 8.32452C0.914216 9.42464 1.68589 10.3649 2.67596 11.0265ZM3.35559 2.0158C4.14449 1.48867 5.07199 1.20731 6.0208 1.20731C7.29311 1.20731 8.51331 1.71274 9.41297 2.6124C10.3126 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5367 7.88088 10.0096 8.66978C9.48244 9.45868 8.73322 10.0736 7.85663 10.4367C6.98005 10.7997 6.01548 10.8947 5.0849 10.7096C4.15433 10.5245 3.29954 10.0676 2.62863 9.39674C1.95772 8.72583 1.50083 7.87104 1.31572 6.94046C1.13062 6.00989 1.22562 5.04532 1.58872 4.16874C1.95181 3.29215 2.56669 2.54292 3.35559 2.0158ZM6.00481 8.60309C5.84641 8.60102 5.69509 8.53718 5.58308 8.42517C5.47107 8.31316 5.40722 8.16183 5.40515 8.00344V6.60422H4.00591C3.84687 6.60422 3.69434 6.54104 3.58189 6.42859C3.46943 6.31613 3.40625 6.1636 3.40625 6.00456C3.40625 5.84553 3.46943 5.693 3.58189 5.58054C3.69434 5.46809 3.84687 5.40491 4.00591 5.40491H5.40515V4.00572C5.40515 3.84668 5.46833 3.69416 5.58079 3.5817C5.69324 3.46924 5.84577 3.40607 6.00481 3.40607C6.16385 3.40607 6.31637 3.46924 6.42883 3.5817C6.54129 3.69416 6.60447 3.84668 6.60447 4.00572V5.40491H8.00362C8.16266 5.40491 8.31518 5.46809 8.42764 5.58054C8.5401 5.693 8.60328 5.84553 8.60328 6.00456C8.60328 6.1636 8.5401 6.31613 8.42764 6.42859C8.31518 6.54104 8.16266 6.60422 8.00362 6.60422H6.60447V8.00344C6.60239 8.16183 6.53855 8.31316 6.42654 8.42517C6.31453 8.53718 6.1632 8.60102 6.00481 8.60309Z",fill:"currentColor"},null,-1)]),16)}Et.render=ma;var qt={name:"UndoIcon",extends:Ke};function pa(a,r,S,B,W,g){return o(),p("svg",K({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.pti()),r[0]||(r[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.77042 5.96336C6.84315 5.99355 6.92118 6.00891 6.99993 6.00854C7.07868 6.00891 7.15671 5.99355 7.22944 5.96336C7.30217 5.93317 7.36814 5.88876 7.42348 5.83273C7.53572 5.72035 7.59876 5.56801 7.59876 5.40918C7.59876 5.25035 7.53572 5.09802 7.42348 4.98564L6.04897 3.61113H6.99998C7.9088 3.61113 8.79722 3.88063 9.55288 4.38554C10.3085 4.89046 10.8975 5.60811 11.2453 6.44776C11.5931 7.2874 11.6841 8.21132 11.5068 9.10268C11.3295 9.99404 10.8918 10.8128 10.2492 11.4554C9.60657 12.0981 8.7878 12.5357 7.89644 12.713C7.00508 12.8903 6.08116 12.7993 5.24152 12.4515C4.40188 12.1037 3.68422 11.5148 3.17931 10.7591C2.67439 10.0035 2.4049 9.11504 2.4049 8.20622C2.4049 8.04726 2.34175 7.89481 2.22935 7.78241C2.11695 7.67001 1.9645 7.60686 1.80554 7.60686C1.64658 7.60686 1.49413 7.67001 1.38172 7.78241C1.26932 7.89481 1.20618 8.04726 1.20618 8.20622C1.20829 9.74218 1.81939 11.2146 2.90548 12.3007C3.99157 13.3868 5.46402 13.9979 6.99998 14C8.5366 14 10.0103 13.3896 11.0968 12.3031C12.1834 11.2165 12.7938 9.74283 12.7938 8.20622C12.7938 6.66961 12.1834 5.19593 11.0968 4.10938C10.0103 3.02283 8.5366 2.41241 6.99998 2.41241H6.04892L7.42348 1.03786C7.48236 0.982986 7.5296 0.916817 7.56235 0.843296C7.59511 0.769775 7.61273 0.690409 7.61415 0.609933C7.61557 0.529456 7.60076 0.449519 7.57062 0.374888C7.54047 0.300257 7.49561 0.232462 7.43869 0.175548C7.38178 0.118634 7.31398 0.0737664 7.23935 0.0436218C7.16472 0.0134773 7.08478 -0.00132663 7.00431 9.32772e-05C6.92383 0.00151319 6.84447 0.019128 6.77095 0.0518865C6.69742 0.0846451 6.63126 0.131876 6.57638 0.190763L4.17895 2.5882C4.06671 2.70058 4.00366 2.85292 4.00366 3.01175C4.00366 3.17058 4.06671 3.32291 4.17895 3.43529L6.57638 5.83273C6.63172 5.88876 6.69769 5.93317 6.77042 5.96336Z",fill:"currentColor"},null,-1)]),16)}qt.render=pa;var fa=`
    .p-image-mask {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .p-image-preview {
        position: relative;
        display: inline-flex;
        line-height: 0;
    }

    .p-image-preview-mask {
        position: absolute;
        inset-inline-start: 0;
        inset-block-start: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.3s;
        border: 0 none;
        padding: 0;
        cursor: pointer;
        background: transparent;
        color: dt('image.preview.mask.color');
        transition: background dt('image.transition.duration');
    }

    .p-image-preview:hover > .p-image-preview-mask {
        opacity: 1;
        cursor: pointer;
        background: dt('image.preview.mask.background');
    }

    .p-image-preview-icon {
        font-size: dt('image.preview.icon.size');
        width: dt('image.preview.icon.size');
        height: dt('image.preview.icon.size');
    }

    .p-image-toolbar {
        position: absolute;
        inset-block-start: dt('image.toolbar.position.top');
        inset-inline-end: dt('image.toolbar.position.right');
        inset-inline-start: dt('image.toolbar.position.left');
        inset-block-end: dt('image.toolbar.position.bottom');
        display: flex;
        z-index: 1;
        padding: dt('image.toolbar.padding');
        background: dt('image.toolbar.background');
        backdrop-filter: blur(dt('image.toolbar.blur'));
        border-color: dt('image.toolbar.border.color');
        border-style: solid;
        border-width: dt('image.toolbar.border.width');
        border-radius: dt('image.toolbar.border.radius');
        gap: dt('image.toolbar.gap');
    }

    .p-image-action {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        color: dt('image.action.color');
        background: transparent;
        width: dt('image.action.size');
        height: dt('image.action.size');
        margin: 0;
        padding: 0;
        border: 0 none;
        cursor: pointer;
        user-select: none;
        border-radius: dt('image.action.border.radius');
        outline-color: transparent;
        transition:
            background dt('image.transition.duration'),
            color dt('image.transition.duration'),
            outline-color dt('image.transition.duration'),
            box-shadow dt('image.transition.duration');
    }

    .p-image-action:hover {
        color: dt('image.action.hover.color');
        background: dt('image.action.hover.background');
    }

    .p-image-action:focus-visible {
        box-shadow: dt('image.action.focus.ring.shadow');
        outline: dt('image.action.focus.ring.width') dt('image.action.focus.ring.style') dt('image.action.focus.ring.color');
        outline-offset: dt('image.action.focus.ring.offset');
    }

    .p-image-action .p-icon {
        font-size: dt('image.action.icon.size');
        width: dt('image.action.icon.size');
        height: dt('image.action.icon.size');
    }

    .p-image-action.p-disabled {
        pointer-events: auto;
    }

    .p-image-original {
        transition: transform 0.15s;
        max-width: 100vw;
        max-height: 100vh;
    }

    .p-image-original-enter-active {
        transition: all 150ms cubic-bezier(0, 0, 0.2, 1);
    }

    .p-image-original-leave-active {
        transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
    }

    .p-image-original-enter-from,
    .p-image-original-leave-to {
        opacity: 0;
        transform: scale(0.7);
    }
`,va={root:function(r){var S=r.props;return["p-image p-component",{"p-image-preview":S.preview}]},previewMask:"p-image-preview-mask",previewIcon:"p-image-preview-icon",mask:"p-image-mask p-overlay-mask p-overlay-mask-enter",toolbar:"p-image-toolbar",rotateRightButton:"p-image-action p-image-rotate-right-button",rotateLeftButton:"p-image-action p-image-rotate-left-button",zoomOutButton:function(r){var S=r.instance;return["p-image-action p-image-zoom-out-button",{"p-disabled":S.isZoomOutDisabled}]},zoomInButton:function(r){var S=r.instance;return["p-image-action p-image-zoom-in-button",{"p-disabled":S.isZoomInDisabled}]},closeButton:"p-image-action p-image-close-button",original:"p-image-original"},ga=ll.extend({name:"image",style:fa,classes:va}),_a={name:"BaseImage",extends:ul,props:{preview:{type:Boolean,default:!1},class:{type:null,default:null},style:{type:null,default:null},imageStyle:{type:null,default:null},imageClass:{type:null,default:null},previewButtonProps:{type:null,default:null},indicatorIcon:{type:String,default:void 0},previewIcon:{type:String,default:void 0},zoomInDisabled:{type:Boolean,default:!1},zoomOutDisabled:{type:Boolean,default:!1}},style:ga,provide:function(){return{$pcImage:this,$parentInstance:this}}},Jt={name:"Image",extends:_a,inheritAttrs:!1,emits:["show","hide","error"],mask:null,data:function(){return{maskVisible:!1,previewVisible:!1,rotate:0,scale:1}},beforeUnmount:function(){this.mask&&mt.clear(this.container)},methods:{maskRef:function(r){this.mask=r},toolbarRef:function(r){this.toolbarRef=r},onImageClick:function(){var r=this;this.preview&&(Nl(),this.maskVisible=!0,setTimeout(function(){r.previewVisible=!0},25))},onPreviewImageClick:function(){this.previewClick=!0},onMaskClick:function(r){var S=ml(r.target,"data-pc-section-group","action")||r.target.closest('[data-pc-section-group="action"]');!this.previewClick&&!S&&(this.previewVisible=!1,this.rotate=0,this.scale=1),this.previewClick=!1},onMaskKeydown:function(r){var S=this;switch(r.code){case"Escape":this.hidePreview(),setTimeout(function(){dl(S.$refs.previewButton)},200),r.preventDefault();break}},onError:function(){this.$emit("error")},rotateRight:function(){this.rotate+=90,this.previewClick=!0},rotateLeft:function(){this.rotate-=90,this.previewClick=!0},zoomIn:function(){this.scale=this.scale+.1,this.previewClick=!0},zoomOut:function(){this.scale=this.scale-.1,this.previewClick=!0},onBeforeEnter:function(){mt.set("modal",this.mask,this.$primevue.config.zIndex.modal)},onEnter:function(){this.focus(),this.$emit("show")},onBeforeLeave:function(){!this.isUnstyled&&cl(this.mask,"p-overlay-mask-leave")},onLeave:function(){Bt(),this.$emit("hide")},onAfterLeave:function(r){mt.clear(r),this.maskVisible=!1},focus:function(){var r=this.mask.querySelector("[autofocus]");r&&r.focus()},hidePreview:function(){this.previewVisible=!1,this.rotate=0,this.scale=1,Bt()}},computed:{containerClass:function(){return[this.cx("root"),this.class]},rotateClass:function(){return"p-image-preview-rotate-"+this.rotate},imagePreviewStyle:function(){return{transform:"rotate("+this.rotate+"deg) scale("+this.scale+")"}},isZoomInDisabled:function(){return this.zoomInDisabled||this.scale>=1.5},isZoomOutDisabled:function(){return this.zoomOutDisabled||this.scale<=.5},rightAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.rotateRight:void 0},leftAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.rotateLeft:void 0},zoomInAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.zoomIn:void 0},zoomOutAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.zoomOut:void 0},zoomImageAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.zoomImage:void 0},closeAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0}},components:{Portal:rl,EyeIcon:At,RefreshIcon:Ht,UndoIcon:qt,SearchMinusIcon:Rt,SearchPlusIcon:Et,TimesIcon:nl},directives:{focustrap:zl}};function We(a){"@babel/helpers - typeof";return We=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},We(a)}function zt(a,r){var S=Object.keys(a);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(a);r&&(B=B.filter(function(W){return Object.getOwnPropertyDescriptor(a,W).enumerable})),S.push.apply(S,B)}return S}function et(a){for(var r=1;r<arguments.length;r++){var S=arguments[r]!=null?arguments[r]:{};r%2?zt(Object(S),!0).forEach(function(B){ya(a,B,S[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(S)):zt(Object(S)).forEach(function(B){Object.defineProperty(a,B,Object.getOwnPropertyDescriptor(S,B))})}return a}function ya(a,r,S){return(r=xa(r))in a?Object.defineProperty(a,r,{value:S,enumerable:!0,configurable:!0,writable:!0}):a[r]=S,a}function xa(a){var r=ba(a,"string");return We(r)=="symbol"?r:r+""}function ba(a,r){if(We(a)!="object"||!a)return a;var S=a[Symbol.toPrimitive];if(S!==void 0){var B=S.call(a,r);if(We(B)!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}var ha=["aria-label"],wa=["aria-modal"],Ca=["aria-label"],ka=["aria-label"],Ia=["disabled","aria-label"],Sa=["disabled","aria-label"],La=["aria-label"],$a=["src"];function Va(a,r,S,B,W,g){var te=ze("RefreshIcon"),be=ze("UndoIcon"),pe=ze("SearchMinusIcon"),i=ze("SearchPlusIcon"),ie=ze("TimesIcon"),ne=ze("Portal"),w=al("focustrap");return o(),p("span",K({class:g.containerClass,style:a.style},a.ptmi("root")),[$e(a.$slots,"image",{errorCallback:g.onError},function(){return[t("img",K({style:a.imageStyle,class:a.imageClass,onError:r[0]||(r[0]=function(){return g.onError&&g.onError.apply(g,arguments)})},et(et({},a.$attrs),a.ptm("image"))),null,16)]}),a.preview?(o(),p("button",K({key:0,ref:"previewButton","aria-label":g.zoomImageAriaLabel,type:"button",class:a.cx("previewMask"),onClick:r[1]||(r[1]=function(){return g.onImageClick&&g.onImageClick.apply(g,arguments)})},et(et({},a.previewButtonProps),a.ptm("previewMask"))),[$e(a.$slots,a.$slots.previewicon?"previewicon":"indicatoricon",{},function(){return[(o(),$(sl(a.previewIcon||a.indicatorIcon?"i":"EyeIcon"),K({class:[a.cx("previewIcon"),a.previewIcon]},a.ptm("previewIcon")),null,16,["class"]))]})],16,ha)):y("",!0),l(ne,null,{default:b(function(){return[W.maskVisible?h((o(),p("div",K({key:0,ref:g.maskRef,role:"dialog",class:a.cx("mask"),"aria-modal":W.maskVisible,onClick:r[8]||(r[8]=function(){return g.onMaskClick&&g.onMaskClick.apply(g,arguments)}),onKeydown:r[9]||(r[9]=function(){return g.onMaskKeydown&&g.onMaskKeydown.apply(g,arguments)})},a.ptm("mask")),[t("div",K({class:a.cx("toolbar")},a.ptm("toolbar")),[t("button",K({class:a.cx("rotateRightButton"),onClick:r[2]||(r[2]=function(){return g.rotateRight&&g.rotateRight.apply(g,arguments)}),type:"button","aria-label":g.rightAriaLabel},a.ptm("rotateRightButton"),{"data-pc-group-section":"action"}),[$e(a.$slots,"refresh",{},function(){return[l(te,Ne(Ee(a.ptm("rotateRightIcon"))),null,16)]})],16,Ca),t("button",K({class:a.cx("rotateLeftButton"),onClick:r[3]||(r[3]=function(){return g.rotateLeft&&g.rotateLeft.apply(g,arguments)}),type:"button","aria-label":g.leftAriaLabel},a.ptm("rotateLeftButton"),{"data-pc-group-section":"action"}),[$e(a.$slots,"undo",{},function(){return[l(be,Ne(Ee(a.ptm("rotateLeftIcon"))),null,16)]})],16,ka),t("button",K({class:a.cx("zoomOutButton"),onClick:r[4]||(r[4]=function(){return g.zoomOut&&g.zoomOut.apply(g,arguments)}),type:"button",disabled:g.isZoomOutDisabled,"aria-label":g.zoomOutAriaLabel},a.ptm("zoomOutButton"),{"data-pc-group-section":"action"}),[$e(a.$slots,"zoomout",{},function(){return[l(pe,Ne(Ee(a.ptm("zoomOutIcon"))),null,16)]})],16,Ia),t("button",K({class:a.cx("zoomInButton"),onClick:r[5]||(r[5]=function(){return g.zoomIn&&g.zoomIn.apply(g,arguments)}),type:"button",disabled:g.isZoomInDisabled,"aria-label":g.zoomInAriaLabel},a.ptm("zoomInButton"),{"data-pc-group-section":"action"}),[$e(a.$slots,"zoomin",{},function(){return[l(i,Ne(Ee(a.ptm("zoomInIcon"))),null,16)]})],16,Sa),t("button",K({class:a.cx("closeButton"),type:"button",onClick:r[6]||(r[6]=function(){return g.hidePreview&&g.hidePreview.apply(g,arguments)}),"aria-label":g.closeAriaLabel,autofocus:""},a.ptm("closeButton"),{"data-pc-group-section":"action"}),[$e(a.$slots,"close",{},function(){return[l(ie,Ne(Ee(a.ptm("closeIcon"))),null,16)]})],16,La)],16),l(ol,K({name:"p-image-original",onBeforeEnter:g.onBeforeEnter,onEnter:g.onEnter,onLeave:g.onLeave,onBeforeLeave:g.onBeforeLeave,onAfterLeave:g.onAfterLeave},a.ptm("transition")),{default:b(function(){return[W.previewVisible?(o(),p("div",Ne(K({key:0},a.ptm("originalContainer"))),[$e(a.$slots,a.$slots.original?"original":"preview",{class:Je(a.cx("original")),style:il(g.imagePreviewStyle),previewCallback:g.onPreviewImageClick},function(){return[t("img",K({src:a.$attrs.src,class:a.cx("original"),style:g.imagePreviewStyle,onClick:r[7]||(r[7]=function(){return g.onPreviewImageClick&&g.onPreviewImageClick.apply(g,arguments)})},a.ptm("original")),null,16,$a)]})],16)):y("",!0)]}),_:3},16,["onBeforeEnter","onEnter","onLeave","onBeforeLeave","onAfterLeave"])],16,wa)),[[w]]):y("",!0)]}),_:3})],16)}Jt.render=Va;const Oa=""+new URL("1-BkkwgdGk.png",import.meta.url).href,Ba=""+new URL("2-CnXqWlHO.png",import.meta.url).href,Da=""+new URL("3-Bl5Pska0.png",import.meta.url).href,za=""+new URL("4-DFvsfMdK.png",import.meta.url).href,Na={class:"space-x-2"},Ta={class:"flex gap-x-4 max-h-full"},ja={class:"flex-7 min-w-0 max-h-full overflow-y-auto"},Pa={class:"w-full flex-1 flex flex-col gap-y-5"},Fa={class:"flex gap-x-2"},Ua={class:"flex-1 flex flex-col gap-y-2"},Ma={class:"text-sm space-x-1 flex items-center"},Aa={class:"pi pi-question-circle cursor-pointer"},Ha={class:"flex-1 flex flex-col gap-y-2"},Ra={class:"flex justify-between items-center"},Ea={class:"text-sm space-x-1 flex items-center"},qa={class:"pi pi-question-circle cursor-pointer"},Ja={class:"flex-1 flex flex-col gap-y-2"},Za={class:"flex justify-between items-center"},Wa={class:"text-sm space-x-1 flex items-center"},Ka={class:"pi pi-question-circle cursor-pointer"},Xa={key:0,class:"flex flex-wrap gap-2"},Ya={key:1},Ga={class:"flex flex-col gap-y-2"},Qa={class:"flex justify-between items-center"},es={class:"text-sm space-x-1 flex items-center"},ts={class:"pi pi-question-circle cursor-pointer"},ls={class:"text-xs text-gray-500 dark:text-gray-300 ml-2"},as={class:"flex gap-2 items-center"},ss={class:"flex-1 flex flex-col gap-y-2"},os={class:"flex justify-between items-center h-[26px]"},is={class:"text-sm space-x-1 flex items-center"},ns={class:"pi pi-question-circle cursor-pointer"},rs={class:"flex-1 flex flex-col gap-y-2"},us={class:"flex justify-between items-center h-[26px]"},cs={class:"text-sm space-x-1 flex items-center"},ds={class:"pi pi-question-circle cursor-pointer"},ms={class:"flex items-center gap-x-2"},ps={class:"flex-1 flex flex-col gap-y-2"},fs={class:"flex justify-between items-center"},vs={class:"text-sm space-x-1 flex items-center"},gs={class:"pi pi-question-circle cursor-pointer"},_s={class:"flex-1 flex flex-col gap-y-2"},ys={class:"flex justify-between items-center"},xs={class:"text-sm space-x-1 flex items-center"},bs={class:"pi pi-question-circle cursor-pointer"},hs={class:"flex items-center gap-2"},ws={class:"flex flex-col gap-2"},Cs={class:"flex flex-col gap-y-2 flex-1"},ks={class:"flex justify-between items-center"},Is={class:"text-sm space-x-1 flex items-center"},Ss={class:"pi pi-question-circle cursor-pointer"},Ls={class:"flex flex-col gap-y-2 flex-1"},$s={class:"flex justify-between items-center"},Vs={class:"text-sm space-x-1 flex items-center"},Os={class:"pi pi-question-circle cursor-pointer"},Bs={class:"flex flex-col gap-y-2"},Ds={class:"flex gap-1 items-center"},zs={key:0,class:"pi pi-question-circle cursor-pointer"},Ns={key:0,class:"flex flex-col gap-y-2"},Ts={class:"flex justify-between items-center gap-x-2"},js={class:"mt-2"},Ps={key:1,class:"space-y-2"},Fs={class:"flex flex-col gap-y-2"},Us={class:"flex items-center gap-1"},Ms={key:0,class:"pi pi-question-circle cursor-pointer"},As={key:0,class:"space-y-2"},Hs={key:3,class:"space-y-2"},Rs={key:0,class:"flex flex-col gap-y-2"},Es={class:"text-sm flex items-center gap-1"},qs={class:"pi pi-question-circle cursor-pointer"},Js={key:0,class:"space-y-2"},Zs={class:"mt-2"},Ws={key:1,class:"space-y-2"},Ks={key:4,class:"flex flex-col gap-y-2"},Xs={class:"flex items-center gap-3"},Ys={for:"cross-section-toggle",class:"cursor-pointer"},Gs={class:"flex gap-2"},Qs={for:"cross-section-toggle",class:"cursor-pointer"},eo={key:0,class:"space-y-5"},to={class:"flex-1 flex flex-col gap-2"},lo={class:"flex-1 flex flex-col gap-2"},ao={class:"flex justify-between items-center"},so={class:"text-sm space-x-1 flex items-center"},oo={class:"pi pi-question-circle cursor-pointer"},io={class:"flex flex-col gap-2"},no={class:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1"},ro={class:"pi pi-question-circle cursor-pointer"},uo={class:"w-full"},co={class:"flex flex-col gap-2"},mo={class:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1"},po={class:"pi pi-question-circle cursor-pointer"},fo={class:"w-full"},vo={class:"space-y-2"},go={class:"text-sm space-y-1"},_o={class:"flex items-center gap-2"},yo={class:"flex items-center gap-2"},xo={class:"space-y-6"},bo={key:0,class:"flex-1 flex flex-col gap-y-2"},ho={class:"flex justify-between items-center"},wo={class:"text-sm space-x-1 flex items-center"},Co={class:"pi pi-question-circle cursor-pointer"},ko={key:1,class:"flex-1 flex flex-col"},Io={class:"flex justify-between items-center"},So={class:"text-sm space-x-1 flex items-center"},Lo={class:"pi pi-question-circle cursor-pointer"},$o={class:"flex flex-col"},Vo={key:0,class:"flex flex-wrap gap-2"},Oo={key:0,class:"flex-1 flex flex-col gap-y-2"},Bo={class:"flex justify-between items-center"},Do={class:"text-sm space-x-1 flex items-center"},zo={class:"pi pi-question-circle cursor-pointer"},No={class:"space-y-1 list-disc pl-4 mt-1"},To={class:"text-xs text-gray-500 dark:text-gray-300"},jo={key:1,class:"flex-1 flex flex-col gap-y-2"},Po={class:"flex justify-between items-center"},Fo={class:"text-sm space-x-1 flex items-center"},Uo={class:"pi pi-question-circle cursor-pointer"},Mo={key:2,class:"flex-1 flex flex-col gap-y-2"},Ao={class:"flex justify-between items-center"},Ho={class:"text-sm space-x-1 flex items-center"},Ro={class:"pi pi-question-circle cursor-pointer"},Eo={key:3,class:"flex-1 flex flex-col gap-y-2"},qo={class:"flex justify-between items-center"},Jo={class:"text-sm space-x-1 flex items-center"},Zo={class:"pi pi-question-circle cursor-pointer"},Wo={key:4,class:"flex-1 flex flex-col gap-y-2"},Ko={class:"flex justify-between items-center"},Xo={class:"text-sm space-x-1 flex items-center"},Yo={class:"pi pi-question-circle cursor-pointer"},Go={key:3,class:"flex flex-col gap-2"},Qo={class:"flex flex-col gap-y-2 flex-1"},ei={class:"flex justify-between items-center"},ti={class:"text-sm flex items-center gap-1"},li={class:"pi pi-question-circle cursor-pointer"},ai={key:4,class:"flex flex-col gap-y-2 flex-1"},si={class:"flex justify-between items-center"},oi={class:"text-sm flex items-center gap-1"},ii={class:"pi pi-question-circle cursor-pointer"},ni={key:5,class:"flex-1 flex flex-col gap-2"},ri={class:"flex justify-between items-center"},ui={class:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1"},ci={class:"pi pi-question-circle cursor-pointer"},di={key:0,class:"flex flex-col gap-4"},mi={class:"space-y-4"},pi={class:"text-sm font-medium flex justify-between items-center gap-1 flex-wrap"},fi={class:"flex items-center space-x-1"},vi=["innerHTML"],gi={class:"pi pi-question-circle cursor-pointer text-gray-400 ml-1"},_i={class:"flex items-end gap-2 flex-wrap"},yi={key:1,class:"flex gap-2 flex-wrap"},xi={class:"flex flex-col gap-1"},bi={class:"flex flex-col gap-1"},hi={class:"flex flex-col gap-1"},wi=_t({__name:"editBatch.tmpl",props:{allConfigInfo:{}},emits:["refreshConfigInfo"],setup(a,{expose:r,emit:S}){const B=yt(),W=Nt(),g=S,te=f(!1),be=f(!1),pe=f(!1),i=f(It),ie=f([]),ne=f([]),w=f(!1),M=f(!1),C=f(!1),ee=f([{label:"多空统一",value:"factorList"},{label:"多空分离",value:"longOrShort"}]),de=f([{label:"多头",value:"long"},{label:"空头",value:"short"}]),De=f("set"),oe=f("factorList"),re=f("factorList"),me=f("factorList"),ue=f("long"),he=f("long"),_e=f("long"),fe=f(null),q=f([]),we=f([]),R=f(null),I=f([]),v=f({策略直播:[],论坛帖子:[],相关船队:[],策略说明:"",使用案例:{}}),D=f({策略直播:[],论坛帖子:[],相关船队:[],策略说明:"",使用案例:{}}),k=f(!1),H=f(!1),n=f(tt),j=f([]),P=f([]),le=f([{label:"数字",value:"number"},{label:"字符串",value:"string"},{label:"布尔",value:"boolean"},{label:"区间",value:"object"}]),Oe=f([{label:"true",value:!0},{label:"false",value:!1}]),Se=Ze(()=>i.value.short_cap_weight===1?[{label:"纯合约（swap_swap）",value:"swap_swap"}]:[{label:"纯现货（spot_spot）",value:"spot_spot"},{label:"纯合约（swap_swap）",value:"swap_swap"},{label:"现货与合约-现货优先（mix_spot）",value:"mix_spot"},{label:"现货与合约-合约优先（mix_swap）",value:"mix_swap"},{label:"现货选币合约优先（spot_swap）",value:"spot_swap"}]),je=c=>{if(c==null)return!1;const{start:e,end:u,step:V}=c,O=Number(e),_=Number(u),X=Number(V);return!([O,_,X].some(ae=>isNaN(ae))||X<=0||X>u||O>=_)},F=async c=>{const e=j.value.findIndex(O=>O.id===c);if(e===-1)return;const u=j.value[e];await Tt();const V=u.candidates;je(V)?u.error="":u.error="区间不合法：请填写有效的起始、结束与步长（0<步长<结束值，起始<结束）"},z=Ze(()=>{let c=["open","close-open"];for(let e=930;e<=1130;e+=5)if(e%100<60){let V=e.toString().padStart(4,"0");c.push(`${V}-${V}`)}for(let e=1305;e<=1455;e+=5)if(e%100<60){let V=e.toString().padStart(4,"0");c.push(`${V}-${V}`)}return c}),d=c=>c.map(e=>Array.isArray(e)?e.join(","):e),Z=async(c,e,u)=>{var V,O;if(n.value=JSON.parse(JSON.stringify(e)),C.value=u||!1,await Ce(),De.value="set",i.value=JSON.parse(JSON.stringify(It)),pe.value=!1,c&&(i.value={...JSON.parse(JSON.stringify(i.value)),...JSON.parse(JSON.stringify(c||{}))},Ve(i.value))){const _=(X,ae)=>((X==null?void 0:X.length)??0)>0||((ae==null?void 0:ae.length)??0)>0;oe.value=_(i.value.long_factor_list,i.value.short_factor_list)?"longOrShort":"factorList",re.value=_(i.value.long_filter_list,i.value.short_filter_list)?"longOrShort":"factorList",me.value=_(i.value.long_filter_list_post,i.value.short_filter_list_post)?"longOrShort":"factorList"}ke(),C.value===!0&&L(i.value.strategy,pt.strategy),((V=n.value.long_select_coin_num)==null?void 0:V.length)>0&&(n.value.long_select_coin_num=d(n.value.long_select_coin_num)),((O=n.value.short_select_coin_num)==null?void 0:O.length)>0&&(n.value.short_select_coin_num=d(n.value.short_select_coin_num)),j.value=[],P.value=[],Object.keys(n.value).forEach(_=>{var X;if(_.includes("[")){const ae=lt(_);if(!j.value.some(Q=>Q.batchName===_)){let Q="number";at(n.value[_])==="object"?Q="object":Q=at((X=n.value[_])==null?void 0:X[0])||"number",j.value.push({id:_,batchName:_,parsed:ae,valueType:Q,candidates:n.value[_]}),P.value.push(_)}}}),te.value=!0},L=async(c,e)=>{e===pt.strategy?(k.value=!0,v.value={策略直播:[],论坛帖子:[],相关船队:[],策略说明:"",使用案例:{}}):(H.value=!0,D.value={策略直播:[],论坛帖子:[],相关船队:[],策略说明:"",使用案例:{}});const u=await fl(encodeURIComponent(c),e);e===pt.strategy?(k.value=!1,u.result===!0&&u.data&&(v.value=u.data)):(H.value=!1,u.result===!0&&u.data&&(D.value=u.data))},Ce=async()=>{const c=await vl();c.result===!0&&(R.value=c.data,q.value=[],we.value=[],c.data!==null&&Object.keys(c.data).length>0&&(Object.keys(c.data).forEach(u=>{const V=c.data;q.value.push({key:u,label:u==="factors"?"时序因子":"截面因子",selectable:!1,children:V[u].map(O=>({key:O.name,label:O.name}))||[]})}),we.value=JSON.parse(JSON.stringify(q.value))))},ke=()=>{let c=0;return i.value.hold_period?(i.value.hold_period.includes("H")&&(c=Number(i.value.hold_period.split("H")[0])),i.value.hold_period.includes("D")&&(c=Number(i.value.hold_period.split("D")[0]))):i.value.offset_list=[],ie.value=Array.from({length:c},(e,u)=>({label:u.toString(),value:u})),c},st=()=>{let c=["2D","3D","4D","5D","6D","7D","8D","9D"],e=["W","1W","2W","3W","4W","5W","6W"];return[{key:"group-day",label:"天",selectable:!1,children:c.map(u=>({key:u,label:u}))},{key:"group-week",label:"周",selectable:!1,children:[...e.map(u=>({key:u,label:u})),{key:"W53",label:"W53"}]},{key:"group-month",label:"月",selectable:!1,children:[{key:"M",label:"M"}]}]},Xe=c=>!!/^\d+[HD]$/.test(c.toString()),Ye=c=>{Xe(c[c.length-1])||Array.isArray(n.value.hold_period)&&n.value.hold_period.pop()},ot=()=>{Array.isArray(n.value.offset_list)?n.value.offset_list.push([]):n.value.offset_list=[[]]},it=c=>{Array.isArray(n.value.offset_list)&&n.value.offset_list.splice(c,1)},Pe=(c,e=!0)=>{const u=typeof c=="string"?Number(c):c;return isNaN(u)?!1:e&&Number.isInteger(u)&&u>=0||u>=0&&u<=1},Ge=c=>{const e=String(c).trim();if(e.includes(",")){const V=e.split(",");if(V.length!==2)return!1;const O=Number(V[0].trim()),_=Number(V[1].trim());return!(isNaN(O)||isNaN(_)||O<0||_<0||O>_)}const u=Number(e);return!(isNaN(u)||u<0)},nt=c=>String(c).trim()==="long_nums"?!0:Ge(c),ye=(c,e)=>{var V,O,_,X,ae,Be;if(!c.length)return;const u=c[c.length-1];if(e==="long_select_coin_num")if(Ge(u)){n.value.long_select_coin_num=c;return}else{(V=n.value.long_select_coin_num)==null||V.pop();return}if(e==="short_select_coin_num")if(nt(u)){n.value.short_select_coin_num=c;return}else{(O=n.value.short_select_coin_num)==null||O.pop();return}Pe(u,!(e==="long_cap_weight"||e==="short_cap_weight"))?e==="select_num"?n.value.select_num=c.map(Q=>Number(Q)):e==="limit"?n.value.limit=c.map(Q=>Number(Q)):e==="long_cap_weight"?n.value.long_cap_weight=c.map(Q=>Number(Q)):e==="short_cap_weight"&&(n.value.short_cap_weight=c.map(Q=>Number(Q))):e==="select_num"?(_=n.value.select_num)==null||_.pop():e==="limit"?(X=n.value.limit)==null||X.pop():e==="long_cap_weight"?(ae=n.value.long_cap_weight)==null||ae.pop():e==="short_cap_weight"&&((Be=n.value.short_cap_weight)==null||Be.pop())},T=(c,e,u)=>{if(!c||!c.length)return;const V=j.value.findIndex(O=>O.id===e);if(V!==-1&&u==="number"){const O=[...c],_=O[O.length-1];isNaN(Number(_))?O.pop():O[O.length-1]=Number(_),j.value[V].candidates=O}},Ie=(c,e)=>{const u=j.value.findIndex(V=>V.id===e);u!==-1&&(c==="object"?j.value[u].candidates={start:null,end:null,step:null}:j.value[u].candidates=[])},ce=()=>{let c=0;return Object.keys(n.value).forEach(e=>{e!=="name"&&e!=="search_name"&&e!=="strategy_info"&&!e.includes("[")&&n.value[e]!==null&&c++}),j.value.length>0&&(c+=j.value.length),c},Y=c=>{if(ce()>=3){B.add({severity:"warn",summary:"每个遍历任务最多只能添加3个参数",life:2e3});return}if(c.includes("[")){const e=lt(c);if(!e){B.add({severity:"error",summary:"参数格式错误",detail:"请检查动态参数格式是否正确",life:2e3});return}if(j.value.some(V=>V.batchName===c)){B.add({severity:"info",summary:"已添加该参数",detail:"该动态参数已存在，无需重复添加",life:2e3});return}j.value.push({id:c,batchName:c,parsed:e,valueType:"number",candidates:[]}),P.value.includes(c)||P.value.push(c)}else n.value[c]==null&&(n.value[c]=c==="hold_period"?{}:[])},G=c=>{const e=n.value;c in e&&(e[c]=null)},ve=(c,e=!1)=>{j.value=j.value.filter(u=>u.id!==c),e&&(P.value=P.value.filter(u=>u!==c))},Zt=()=>{var c;(c=fe.value)==null||c.submit()},Wt=async()=>{if(j.value.some(_=>_.error)){B.add({severity:"error",summary:"动态参数输入有误",detail:"请修正动态参数中的错误后再提交",life:3e3});return}let e={};Object.keys(n.value).forEach(_=>{_.includes("[")||(e[_]=n.value[_])}),e.long_select_coin_num&&e.long_select_coin_num.length>0&&(e.long_select_coin_num=e.long_select_coin_num.map(_=>$t(_))),e.short_select_coin_num&&e.short_select_coin_num.length>0&&(e.short_select_coin_num=e.short_select_coin_num.map(_=>$t(_,"long_nums")));let u={...e,...j.value.reduce((_,X)=>(_[X.batchName]=X.candidates,_),{})},V=0;if(Object.keys(u).forEach(_=>{(JSON.stringify(u[_])==="[]"||u[_]===null)&&V++}),V===Object.keys(u).length-3){B.add({severity:"error",summary:"请至少配置一个遍历参数,才能保存！",life:3e3});return}(await gl(u)).result===!0&&(B.add({severity:"success",summary:"保存成功！",life:3e3}),te.value=!1,g("refreshConfigInfo"))},Kt=()=>{W.require({group:"editBatch",message:"当前的修改还未保存，确定要关闭吗？",header:"确认关闭",icon:"pi pi-exclamation-triangle text-yellow-500",rejectProps:{label:"取消",outlined:!0},acceptProps:{label:"确定",severity:"secondary"},accept:()=>{te.value=!1},reject:()=>{}})};return r({openDrawer:Z}),(c,e)=>{const u=ht,V=ea,O=ta,_=jl,X=Mt,ae=Ut,Be=wt,Q=sa,rt=aa,ut=la,ct=Pl,kt=oa,Xt=Ft,Le=Ml,Yt=Al,Qe=ia,Gt=Ct,Qt=bt,el=Tl,tl=Hl,U=xt;return o(),p(N,null,[l(el,{visible:te.value,"onUpdate:visible":e[73]||(e[73]=Fe=>te.value=Fe),header:"策略遍历配置编辑",dismissable:!1,position:"full",class:"w-[50vw]",pt:{content:{class:"flex flex-col"},header:{class:"py-3"}}},{closebutton:b(()=>[t("div",Na,[l(u,{label:"保存",size:"small",onClick:Zt,loading:pe.value},null,8,["loading"]),l(u,{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:Kt})])]),default:b(()=>[t("div",Ta,[t("div",ja,[l(Xt,{ref_key:"refForm",ref:fe,onSubmit:Wt,class:"flex flex-col space-y-4 pr-1"},{default:b(Fe=>{var Ue,Me,Ae,He,Re,m;return[t("div",Pa,[C.value&&x(A)==="stock"?(o(),$(V,{key:0,header:`「${i.value.name}」策略教程`,toggleable:"",class:"text-md bg-primary-50 dark:bg-gray-700",pt:{header:{class:"text-primary-600 dark:text-primary-500 px-2 py-0"}}},{default:b(()=>[l(Dt,{isLoading:k.value,teachInfo:v.value},null,8,["isLoading","teachInfo"])]),_:1},8,["header"])):y("",!0),t("div",Fa,[t("div",{class:Je(["flex flex-col gap-y-2",be.value?"flex-1":"flex-4"])},[e[74]||(e[74]=t("div",{class:"text-sm space-x-1 flex items-center"},[t("span",{class:"font-bold"},"策略名称")],-1)),x(A)==="coin"&&x(Ve)(i.value)?(o(),$(O,{key:0,modelValue:i.value.strategy,"onUpdate:modelValue":e[0]||(e[0]=s=>i.value.strategy=s),modelModifiers:{trim:!0},name:"strategy",type:"text",placeholder:"请填写策略名称",class:"w-full",size:"small",disabled:!0},null,8,["modelValue"])):x(A)==="stock"&&x(Te)(i.value)?(o(),$(O,{key:1,modelValue:i.value.name,"onUpdate:modelValue":e[1]||(e[1]=s=>i.value.name=s),modelModifiers:{trim:!0},name:"name",type:"text",placeholder:"请填写策略名称",class:"w-full",size:"small",disabled:!0},null,8,["modelValue"])):y("",!0)],2),t("div",Ua,[t("div",Ma,[e[75]||(e[75]=t("span",{class:"font-bold"},"资金权重",-1)),h(t("i",Aa,null,512),[[U,{value:"资金占比，多策略组合时使用，会做归一化计算。如有两个策略，每个策略的cap_weight都设置为1，那么每个子策略的资金占比为 1/(1+1) = 0.5，也就是每个子策略资金占比50%。",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(_,{modelValue:i.value.cap_weight,"onUpdate:modelValue":e[2]||(e[2]=s=>i.value.cap_weight=s),name:"cap_weight",minFractionDigits:0,maxFractionDigits:3,step:.1,min:0,max:1,mode:"decimal",showButtons:"",size:"small",disabled:!0},null,8,["modelValue"])])]),t("div",Ha,[t("div",Ra,[t("div",Ea,[e[76]||(e[76]=t("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"持仓周期",-1)),h(t("i",qa,null,512),[[U,{value:x(A)==="coin"?"选币持仓的时间，H代表小时，持仓几个小时，有1H到24H一共24种选择；D代表日，1D持仓一天。":"选股交易的持股周期，D表示持股几天，如3D就是持股3天。W表示持股一周，M表示持股一个月。具体参数参照股票周期预运算表的数据文件。",autoHide:!1,escape:!1},void 0,{bottom:!0}]])])]),l(O,{value:i.value.hold_period,size:"small",class:"w-full",disabled:!0},null,8,["value"])]),t("div",Ja,[t("div",Za,[t("div",Wa,[e[77]||(e[77]=t("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"offset_list",-1)),h(t("i",Ka,null,512),[[U,{value:x(A)==="coin"?"选择持仓的offset，具体原理请参考：<a href='https://bbs.quantclass.cn/thread/46812' target='_blank' class='text-primary-500 hover:underline'>【小白入门】持仓周期，offset和分钟偏移——入门基础知识系列 - 量化小论坛</a>":"与持股周期配合的具体offset，具体原理请参考：<a href='https://bbs.quantclass.cn/thread/46812' target='_blank' class='text-primary-500 hover:underline'>【小白入门】持仓周期，offset和分钟偏移——入门基础知识系列 - 量化小论坛</a>",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),h(l(u,{onClick:e[3]||(e[3]=s=>Y("offset_list")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[se,!n.value.offset_list]]),h(l(u,{onClick:e[4]||(e[4]=s=>G("offset_list")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[se,n.value.offset_list]])]),i.value.offset_list.length>0?(o(),p("div",Xa,[(o(!0),p(N,null,ge(i.value.offset_list,(s,dt)=>(o(),$(X,{key:s,class:"font-medium text-xs",severity:"secondary"},{default:b(()=>[E(J(s),1)]),_:2},1024))),128))])):(o(),p("div",Ya,"无"))]),x(A)==="coin"&&x(Ve)(i.value)?(o(),p(N,{key:1},[t("div",Ga,[t("div",Qa,[t("div",es,[e[78]||(e[78]=t("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"选币范围(现货/合约)",-1)),h(t("i",ts,null,512),[[U,{value:x(St),autoHide:!1,escape:!1,class:"min-w-80"},void 0,{bottom:!0}]])]),h(l(u,{onClick:e[5]||(e[5]=s=>Y("market")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[se,!n.value.market]]),h(l(u,{onClick:e[6]||(e[6]=s=>G("market")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[se,n.value.market]])]),l(ae,{modelValue:i.value.market,"onUpdate:modelValue":e[7]||(e[7]=s=>i.value.market=s),options:x(pl),optionLabel:"label",optionValue:"value",placeholder:"请选择选币范围(现货/合约)",class:"w-full",size:"small",disabled:""},null,8,["modelValue","options"]),t("span",ls,J(i.value.market)+": "+J(x(Lt)[i.value.market]),1)]),t("div",as,[t("div",ss,[t("div",os,[t("div",is,[e[79]||(e[79]=t("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"多头权重",-1)),h(t("i",ns,null,512),[[U,{value:"多头权重：多头在子策略的仓位占比，如1表示纯多策略",autoHide:!1,escape:!1,class:"min-w-90"}]])])]),l(_,{modelValue:i.value.long_cap_weight,"onUpdate:modelValue":e[8]||(e[8]=s=>i.value.long_cap_weight=s),size:"small",class:"flex-1",disabled:""},null,8,["modelValue"])]),t("div",rs,[t("div",us,[t("div",cs,[e[80]||(e[80]=t("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"空头权重",-1)),h(t("i",ds,null,512),[[U,{value:"空头权重：空头在子策略的仓位占比，如1表示纯空策略",autoHide:!1,escape:!1,class:"min-w-90"}]])])]),l(_,{modelValue:i.value.short_cap_weight,"onUpdate:modelValue":e[9]||(e[9]=s=>i.value.short_cap_weight=s),size:"small",class:"flex-1",disabled:""},null,8,["modelValue"])])]),t("div",ms,[t("div",ps,[t("div",fs,[t("div",vs,[e[81]||(e[81]=t("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"多头选币数量",-1)),h(t("i",gs,null,512),[[U,{value:"支持整数（如10）、小数（如0.5）、区间（如1,5）区间起始值和结束值用英文逗号隔开",autoHide:!1},void 0,{bottom:!0}]])]),h(l(u,{onClick:e[10]||(e[10]=s=>Y("long_select_coin_num")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[se,!n.value.long_select_coin_num]]),h(l(u,{onClick:e[11]||(e[11]=s=>G("long_select_coin_num")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[se,n.value.long_select_coin_num]])]),l(O,{modelValue:i.value.long_select_coin_num,"onUpdate:modelValue":e[12]||(e[12]=s=>i.value.long_select_coin_num=s),modelModifiers:{trim:!0},name:"long_select_coin_num",placeholder:"支持整数（如10）、小数（如0.5）、区间（如1,5）区间起始值和结束值用英文逗号隔开",class:"w-full",size:"small",disabled:""},null,8,["modelValue"])]),t("div",_s,[t("div",ys,[t("div",xs,[e[82]||(e[82]=t("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"空头选币数量",-1)),h(t("i",bs,null,512),[[U,{value:"支持输入整数， 小数，long_nums(和多头选币数量一致),区间（如1,5）区间起始值和结束值用英文逗号隔开",autoHide:!1},void 0,{bottom:!0}]])]),h(l(u,{onClick:e[13]||(e[13]=s=>Y("short_select_coin_num")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[se,!n.value.short_select_coin_num]]),h(l(u,{onClick:e[14]||(e[14]=s=>G("short_select_coin_num")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[se,n.value.short_select_coin_num]])]),t("div",hs,[l(O,{modelValue:i.value.short_select_coin_num,"onUpdate:modelValue":e[15]||(e[15]=s=>i.value.short_select_coin_num=s),modelModifiers:{trim:!0},name:"short_select_coin_num",placeholder:"支持输入整数， 小数，long_nums(和多头选币数量一致),区间（如1,5）区间起始值和结束值用英文逗号隔开",size:"small",class:"flex-1",disabled:""},null,8,["modelValue"])])])])],64)):x(A)==="stock"&&x(Te)(i.value)?(o(),p(N,{key:2},[t("div",ws,[t("div",Cs,[t("div",ks,[t("div",Is,[e[83]||(e[83]=t("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"选股数量",-1)),h(t("i",Ss,null,512),[[U,{value:"选股数量，可以是整数，如10就是选股10只。也可以是小数，如0.1就是选全市场10%的股票，约500+只。",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),h(l(u,{onClick:e[16]||(e[16]=s=>Y("select_num")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[se,!n.value.select_num]]),h(l(u,{onClick:e[17]||(e[17]=s=>G("select_num")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[se,n.value.select_num]])]),l(_,{modelValue:i.value.select_num,"onUpdate:modelValue":e[18]||(e[18]=s=>i.value.select_num=s),name:"select_num",min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",class:"w-full",placeholder:"请输入选股数量",size:"small",disabled:!0},null,8,["modelValue"])])]),t("div",Ls,[t("div",$s,[t("div",Vs,[e[84]||(e[84]=t("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"换仓时间",-1)),h(t("i",Os,null,512),[[U,{value:"换仓时机，根据持仓周期和offset交易时，在股票开始时间具体什么时刻卖出和买入。<br/>隔日换仓：'close-open'：offset结束日收盘前卖出，offset开始日开盘后买入；<br/>开盘日内换仓：'open'：offset当天实现换仓，开盘后先卖出再买入；<br/>指定时间换仓：按照5分钟为间隔指定交易日内换仓时间，如'0955-0955'是上午9:55先卖出，再买入。",autoHide:!1,escape:!1,class:"min-w-85"},void 0,{bottom:!0}]])]),h(l(u,{onClick:e[19]||(e[19]=s=>Y("rebalance_time")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[se,!n.value.rebalance_time]]),h(l(u,{onClick:e[20]||(e[20]=s=>G("rebalance_time")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[se,n.value.rebalance_time]])]),l(ae,{modelValue:i.value.rebalance_time,"onUpdate:modelValue":e[21]||(e[21]=s=>i.value.rebalance_time=s),name:"rebalance_time",filter:"",options:z.value,size:"small",class:"w-full",disabled:!0},null,8,["modelValue","options"])])],64)):y("",!0),l(Be,{align:"center",type:"solid",class:"mb-0"},{default:b(()=>e[85]||(e[85]=[t("b",{class:"text-primary-500"},"因子配置",-1)])),_:1,__:[85]}),t("div",Bs,[t("div",Ds,[e[86]||(e[86]=t("span",{class:"font-bold"},"因子配置",-1)),x(A)==="coin"?h((o(),p("i",zs,null,512)),[[U,{value:`多空统一：多头和空头因子设置相同；
多空分离：多头和空头因子设置不相同，可以分开设置；`,autoHide:!1,class:"min-w-85"}]]):y("",!0)]),x(A)==="coin"&&x(Ve)(i.value)?(o(),p(N,{key:0},[l(ut,{value:oe.value,"onUpdate:value":e[22]||(e[22]=s=>oe.value=s),class:"w-full"},{default:b(()=>[l(rt,{class:"px-2 py-1"},{default:b(()=>[(o(!0),p(N,null,ge(ee.value,s=>(o(),$(Q,{key:s.label,value:s.value,pt:{root:"px-4 py-2"},disabled:""},{default:b(()=>[E(J(s.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),oe.value==="longOrShort"?(o(),p("div",Ns,[t("div",Ts,[l(ct,{options:de.value,modelValue:ue.value,"onUpdate:modelValue":e[23]||(e[23]=s=>ue.value=s),"option-label":"label","option-value":"value",size:"small"},null,8,["options","modelValue"])])])):y("",!0)],64)):x(A)==="stock"&&x(Te)(i.value)?(o(),p(N,{key:1},[],64)):y("",!0),t("div",js,[oe.value==="factorList"?(o(),$(xe,{key:0,propkey:"1",factorList:i.value.factor_list||[],title:"",factorSelect:"因子",factorNameOpetions:q.value,allFactorInfo:R.value,onSaveData:e[24]||(e[24]=s=>i.value.factor_list=s),onAddFactorBatchItem:Y,onRemoveFactorBatchItem:ve,BatchParamsNameList:P.value,paramsName:"factor_list",isDemoStrategy:C.value,disabled:!0,isBatchItem:!0,BatchLength:ce()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):x(A)==="coin"?(o(),p("div",Ps,[x(Ve)(i.value)?(o(),p(N,{key:0},[ue.value==="long"?(o(),$(xe,{key:0,propkey:"2",factorList:((Ue=i.value)==null?void 0:Ue.long_factor_list)||[],title:"多头选币",factorSelect:"因子",factorNameOpetions:q.value,allFactorInfo:R.value,onSaveData:e[25]||(e[25]=s=>i.value.long_factor_list=s),onAddFactorBatchItem:Y,onRemoveFactorBatchItem:ve,BatchParamsNameList:P.value,paramsName:"long_factor_list",isDemoStrategy:C.value,disabled:!0,isBatchItem:!0,BatchLength:ce()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):(o(),$(xe,{key:1,propkey:"3",factorList:((Me=i.value)==null?void 0:Me.short_factor_list)||[],title:"空头选币",factorSelect:"因子",factorNameOpetions:q.value,allFactorInfo:R.value,onSaveData:e[26]||(e[26]=s=>i.value.short_factor_list=s),onAddFactorBatchItem:Y,onRemoveFactorBatchItem:ve,BatchParamsNameList:P.value,paramsName:"short_factor_list",isDemoStrategy:C.value,disabled:!0,isBatchItem:!0,BatchLength:ce()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"]))],64)):y("",!0)])):y("",!0)])]),t("div",Fs,[t("div",Us,[e[87]||(e[87]=t("span",{class:"font-bold"},"前置过滤因子配置",-1)),x(A)==="coin"?h((o(),p("i",Ms,null,512)),[[U,{value:`多空统一：多头和空头因子设置相同；
多空分离：多头和空头因子设置不相同，可以分开设置；`,autoHide:!1,class:"min-w-85"}]]):y("",!0)]),x(A)==="coin"&&x(Ve)(i.value)?(o(),p(N,{key:0},[l(ut,{value:re.value,"onUpdate:value":e[27]||(e[27]=s=>re.value=s),class:"w-full"},{default:b(()=>[l(rt,{class:"px-2 py-1"},{default:b(()=>[(o(!0),p(N,null,ge(ee.value,s=>(o(),$(Q,{key:s.label,value:s.value,pt:{root:"px-4 py-2"},disabled:""},{default:b(()=>[E(J(s.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),re.value==="longOrShort"?(o(),p("div",As,[l(ct,{options:de.value,modelValue:he.value,"onUpdate:modelValue":e[28]||(e[28]=s=>he.value=s),"option-label":"label","option-value":"value",size:"small"},null,8,["options","modelValue"])])):y("",!0)],64)):x(A)==="stock"&&x(Te)(i.value)?(o(),p(N,{key:1},[],64)):y("",!0),re.value==="factorList"?(o(),$(xe,{key:2,propkey:"4",factorList:i.value.filter_list||[],title:"前置过滤",factorSelect:"前置过滤因子",factorNameOpetions:q.value,allFactorInfo:R.value,onSaveData:e[29]||(e[29]=s=>i.value.filter_list=s),onAddFactorBatchItem:Y,onRemoveFactorBatchItem:ve,BatchParamsNameList:P.value,paramsName:"filter_list",isDemoStrategy:C.value,disabled:!0,isBatchItem:!0,BatchLength:ce()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):x(A)==="coin"?(o(),p("div",Hs,[x(Ve)(i.value)?(o(),p(N,{key:0},[he.value==="long"?(o(),$(xe,{key:0,propkey:"5",factorList:((Ae=i.value)==null?void 0:Ae.long_filter_list)||[],title:"多头前置过滤",factorSelect:"前置过滤因子",factorNameOpetions:q.value,allFactorInfo:R.value,onSaveData:e[30]||(e[30]=s=>i.value.long_filter_list=s),onAddFactorBatchItem:Y,onRemoveFactorBatchItem:ve,BatchParamsNameList:P.value,paramsName:"long_filter_list",isDemoStrategy:C.value,disabled:!0,isBatchItem:!0,BatchLength:ce()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):(o(),$(xe,{key:1,propkey:"6",factorList:((He=i.value)==null?void 0:He.short_filter_list)||[],title:"空头前置过滤",factorSelect:"前置过滤因子",factorNameOpetions:q.value,allFactorInfo:R.value,onSaveData:e[31]||(e[31]=s=>i.value.short_filter_list=s),onAddFactorBatchItem:Y,onRemoveFactorBatchItem:ve,BatchParamsNameList:P.value,paramsName:"short_filter_list",isDemoStrategy:C.value,disabled:!0,isBatchItem:!0,BatchLength:ce()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"]))],64)):y("",!0)])):y("",!0)]),x(A)==="coin"?(o(),p(N,{key:3},[x(Ve)(i.value)?(o(),p("div",Rs,[t("div",Es,[e[88]||(e[88]=t("span",{class:"font-bold"},"后置过滤因子配置",-1)),h(t("i",qs,null,512),[[U,{value:`多空统一：多头和空头因子设置相同；
多空分离：多头和空头因子设置不相同，可以分开设置；`,autoHide:!1,class:"min-w-85"}]])]),l(ut,{value:me.value,"onUpdate:value":e[32]||(e[32]=s=>me.value=s),class:"w-full"},{default:b(()=>[l(rt,{class:"px-2 py-1"},{default:b(()=>[(o(!0),p(N,null,ge(ee.value,s=>(o(),$(Q,{key:s.label,value:s.value,pt:{root:"px-4 py-2"},disabled:""},{default:b(()=>[E(J(s.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),me.value==="longOrShort"?(o(),p("div",Js,[l(ct,{options:de.value,modelValue:_e.value,"onUpdate:modelValue":e[33]||(e[33]=s=>_e.value=s),"option-label":"label","option-value":"value",size:"small"},null,8,["options","modelValue"])])):y("",!0),t("div",Zs,[me.value==="factorList"?(o(),$(xe,{key:0,propkey:"7",factorList:i.value.filter_list_post||[],title:"后置过滤",factorSelect:"后置过滤因子",factorNameOpetions:q.value,allFactorInfo:R.value,onSaveData:e[34]||(e[34]=s=>i.value.filter_list_post=s),onAddFactorBatchItem:Y,onRemoveFactorBatchItem:ve,BatchParamsNameList:P.value,paramsName:"filter_list_post",isDemoStrategy:C.value,disabled:!0,isBatchItem:!0,BatchLength:ce()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):(o(),p("div",Ws,[_e.value==="long"?(o(),$(xe,{key:0,propkey:"8",factorList:((Re=i.value)==null?void 0:Re.long_filter_list_post)||[],title:"多头后置过滤",factorSelect:"后置过滤因子",factorNameOpetions:q.value,allFactorInfo:R.value,onSaveData:e[35]||(e[35]=s=>i.value.long_filter_list_post=s),onAddFactorBatchItem:Y,onRemoveFactorBatchItem:ve,BatchParamsNameList:P.value,paramsName:"long_filter_list_post",isDemoStrategy:C.value,disabled:!0,isBatchItem:!0,BatchLength:ce()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):(o(),$(xe,{key:1,propkey:"9",factorList:((m=i.value)==null?void 0:m.short_filter_list_post)||[],title:"空头后置过滤",factorSelect:"后置过滤因子",factorNameOpetions:q.value,allFactorInfo:R.value,onSaveData:e[36]||(e[36]=s=>i.value.short_filter_list_post=s),onAddFactorBatchItem:Y,onRemoveFactorBatchItem:ve,BatchParamsNameList:P.value,paramsName:"short_filter_list_post",isDemoStrategy:C.value,disabled:!0,isBatchItem:!0,BatchLength:ce()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"]))]))])])):y("",!0)],64)):x(A)==="stock"&&x(Te)(i.value)?(o(),p("div",Ks,[e[89]||(e[89]=t("div",{class:"flex items-center gap-1"},[t("span",{class:"font-bold"},"截面因子配置"),t("span",{class:"text-primary-500 text-sm"},"(该功能尚未直播，请先保持默认配置)")],-1)),t("div",Xs,[l(kt,{modelValue:w.value,"onUpdate:modelValue":e[37]||(e[37]=s=>w.value=s),inputId:"cross-section-toggle","aria-label":"截面因子启用开关",disabled:!0},null,8,["modelValue"]),t("div",Ys,J(w.value?"已启用截面因子":"未启用截面因子"),1)]),h(l(Fl,{factorList:i.value.cross_sections,factorNameOpetions:we.value,allFactorInfo:R.value,onSaveData:e[38]||(e[38]=s=>i.value.cross_sections=s),isEdit:!1},null,8,["factorList","factorNameOpetions","allFactorInfo"]),[[se,w.value===!0]])])):y("",!0),x(A)==="stock"?(o(),p(N,{key:5},[l(Be,{align:"center",type:"solid",class:"mb-0"},{default:b(()=>e[90]||(e[90]=[t("b",{class:"text-primary-500"},"择时信号配置",-1)])),_:1,__:[90]}),t("div",Gs,[l(kt,{modelValue:M.value,"onUpdate:modelValue":e[39]||(e[39]=s=>M.value=s),inputId:"cross-section-toggle","aria-label":"择时信号启用开关",disabled:!0},null,8,["modelValue"]),t("div",Qs,J(M.value?"已启用择时信号":"未启用择时信号"),1)]),x(Te)(i.value)&&i.value.timing&&M.value?(o(),p("div",eo,[x(A)==="stock"&&i.value.timing.name?(o(),$(V,{key:0,header:`「${i.value.timing.name}」策略教程`,toggleable:"",class:"text-md bg-primary-50 dark:bg-gray-700",pt:{header:{class:"text-primary-600 dark:text-primary-500 px-2 py-0"}}},{default:b(()=>[l(Dt,{isLoading:H.value,teachInfo:D.value},null,8,["isLoading","teachInfo"])]),_:1},8,["header"])):y("",!0),t("div",to,[e[91]||(e[91]=t("div",{class:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1"},[t("span",null,"择时策略名称")],-1)),l(ae,{modelValue:i.value.timing.name,"onUpdate:modelValue":e[40]||(e[40]=s=>i.value.timing.name=s),name:"timingName",filter:"",options:I.value,size:"small",class:"w-full",disabled:!0},null,8,["modelValue","options"])]),t("div",lo,[t("div",ao,[t("div",so,[e[92]||(e[92]=t("span",{class:"text-primary-500 dark:text-primary-300 font-semibold"},"择时阈值(limit)",-1)),h(t("i",oo,null,512),[[U,{value:"择时信号计算的选股范围，有三种形式：0，小数和整数。<br/>0，代表全市场（选股策略过滤过的全市场）。<br/>小数，如0.2代表全市场的20%。<br/>整数，如200代表200只股票。<br/>",autoHide:!1,escape:!1,class:"min-w-85"}]])]),h(l(u,{onClick:e[41]||(e[41]=s=>Y("limit")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[se,!n.value.limit]]),h(l(u,{onClick:e[42]||(e[42]=s=>G("limit")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[se,n.value.limit]])]),l(_,{modelValue:i.value.timing.limit,"onUpdate:modelValue":e[43]||(e[43]=s=>i.value.timing.limit=s),placeholder:"例如：100 或 0.5",min:0,minFractionDigits:0,maxFractionDigits:3,disabled:!0,class:"w-full",mode:"decimal",size:"small"},null,8,["modelValue"])]),t("div",io,[t("div",no,[e[93]||(e[93]=E(" 择时参数 ")),h(t("i",ro,null,512),[[U,{value:"择时规则参数，目前14个定风波因子有固定阈值，时间周期，技术指标等几种参数类型。",autoHide:!1,escape:!1,class:"min-w-85"}]])]),t("div",uo,[l(_,{class:"hidden",name:"timingParams"}),l(Ul,{parameData:i.value.timing.params,"onUpdate:parameData":e[44]||(e[44]=s=>i.value.timing.params=s),isDisable:!0},null,8,["parameData"])])]),t("div",co,[t("div",mo,[e[94]||(e[94]=E(" 择时因子 ")),h(t("i",po,null,512),[[U]])]),l(xe,{propkey:new Date().getTime(),factorList:i.value.timing.factor_list||[],title:"择时",factorSelect:"因子",factorNameOpetions:q.value,allFactorInfo:R.value,onSaveData:e[45]||(e[45]=s=>i.value.timing.factor_list=s),onAddFactorBatchItem:Y,onRemoveFactorBatchItem:ve,BatchParamsNameList:P.value,paramsName:"timing_factor_list",isDemoStrategy:C.value,disabled:!0,isBatchItem:!0,BatchLength:ce()},null,8,["propkey","factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])])])):y("",!0)],64)):y("",!0)])]}),_:1},512)]),l(Qt,{class:"flex-3 max-h-full overflow-y-auto min-w-0 h-fit sticky top-2 right-0 border-1 shadow-sm border-primary-200 dark:border-gray-700"},{content:b(()=>{var Fe,Ue,Me,Ae,He,Re;return[t("div",fo,[t("div",vo,[e[103]||(e[103]=t("h1",{class:"font-bold text-primary-600 dark:text-primary-500"}," 遍历参数 ",-1)),e[104]||(e[104]=t("h2",{class:"text-sm text-gray-500 dark:text-gray-400"}," 在左侧策略信息区域，点击「+ 遍历」按钮即可添加需要遍历参数的候选项 ",-1)),t("ul",go,[t("li",_o,[ce()>=2?(o(),p(N,{key:0},[e[95]||(e[95]=t("i",{class:"pi pi-check-circle text-green-500"},null,-1)),e[96]||(e[96]=t("span",{class:"text-green-500"},"参数遍历分析工具 - 热力图",-1))],64)):(o(),p(N,{key:1},[e[97]||(e[97]=t("i",{class:"pi pi-times-circle text-gray-400"},null,-1)),e[98]||(e[98]=t("span",{class:"text-gray-400"},"参数遍历分析工具 - 热力图",-1))],64))]),t("li",yo,[ce()>=1?(o(),p(N,{key:0},[e[99]||(e[99]=t("i",{class:"pi pi-check-circle text-green-500"},null,-1)),e[100]||(e[100]=t("span",{class:"text-green-500"},"参数遍历分析工具 - 参数平原",-1))],64)):(o(),p(N,{key:1},[e[101]||(e[101]=t("i",{class:"pi pi-times-circle text-gray-400"},null,-1)),e[102]||(e[102]=t("span",{class:"text-gray-400"},"参数遍历分析工具 - 参数平原",-1))],64))])])]),t("div",{class:Je(j.value.length>0?"space-y-6 mt-4":"space-y-0 mt-4")},[t("div",xo,[n.value.hold_period?(o(),p("div",bo,[t("div",ho,[t("div",wo,[e[105]||(e[105]=t("span",{class:"font-bold"},"持仓周期 - 候选项",-1)),e[106]||(e[106]=t("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),h(t("i",Co,null,512),[[U,{value:x(A)==="coin"?"选币持仓的时间，H代表小时，持仓几个小时，有1H到24H一共24种选择；D代表日，1D持仓一天。":"选股交易的持股周期，D表示持股几天，如3D就是持股3天。W表示持股一周，M表示持股一个月。具体参数参照股票周期预运算表的数据文件。",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(u,{onClick:e[46]||(e[46]=m=>G("hold_period")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),x(A)==="coin"?(o(),$(Le,{key:0,modelValue:n.value.hold_period,"onUpdate:modelValue":e[47]||(e[47]=m=>n.value.hold_period=m),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入持仓周期，输入如23H或7D，按回车添加",onValueChange:e[48]||(e[48]=m=>Ye(m)),class:"w-full"},null,8,["modelValue"])):(o(),$(Yt,{key:1,modelValue:n.value.hold_period,"onUpdate:modelValue":e[49]||(e[49]=m=>n.value.hold_period=m),name:"hold_period",showClear:"",filter:"",filterMode:"lenient",options:st(),placeholder:"请选择持仓周期（多选）",size:"small",class:"w-full",selectionMode:"multiple"},null,8,["modelValue","options"]))])):y("",!0),n.value.offset_list?(o(),p("div",ko,[t("div",Io,[t("div",So,[e[107]||(e[107]=t("span",{class:"font-bold"},"offset_list - 候选项",-1)),h(t("i",Lo,null,512),[[U,{value:x(A)==="coin"?"选择持仓的offset，具体原理请参考：<a href='https://bbs.quantclass.cn/thread/46812' target='_blank' class='text-primary-500 hover:underline'>【小白入门】持仓周期，offset和分钟偏移——入门基础知识系列 - 量化小论坛</a>":"与持股周期配合的具体offset，具体原理请参考：<a href='https://bbs.quantclass.cn/thread/46812' target='_blank' class='text-primary-500 hover:underline'>【小白入门】持仓周期，offset和分钟偏移——入门基础知识系列 - 量化小论坛</a>",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(u,{onClick:e[50]||(e[50]=m=>G("offset_list")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),t("div",$o,[n.value.offset_list.length>0?(o(),p("div",Vo,[(o(!0),p(N,null,ge(n.value.offset_list,(m,s)=>(o(),p("div",{class:"flex items-center gap-2",key:s},[l(Qe,{modelValue:n.value.offset_list[s],"onUpdate:modelValue":dt=>n.value.offset_list[s]=dt,name:`offset_list_${s}`,options:x(A)==="coin"?ie.value:ne.value,optionLabel:"label",optionValue:"value",placeholder:"请选择offset（多选）",minSelectedLabels:1,class:"flex-1",size:"small",filter:"",maxSelectedLabels:5,"selected-items-label":m.length===(x(A)==="coin"?ie.value.length:ne.value.length)?"全offset覆盖":`${m.length}个offset`,emptyFilterMessage:"无匹配结果",emptyMessage:"暂无数据"},null,8,["modelValue","onUpdate:modelValue","name","options","selected-items-label"]),l(u,{icon:"pi pi-trash",severity:"danger",variant:"outlined",size:"small",rounded:"",onClick:dt=>it(s)},null,8,["onClick"])]))),128))])):y("",!0),l(u,{label:"添加",icon:"pi pi-plus",size:"small",variant:"outlined",onClick:ot,class:"w-fit mt-2"})])])):y("",!0),x(A)==="coin"?(o(),p(N,{key:2},[n.value.market?(o(),p("div",Oo,[t("div",Bo,[t("div",Do,[e[108]||(e[108]=t("span",{class:"font-bold"},"选币范围(现货/合约) - 候选项",-1)),h(t("i",zo,null,512),[[U,{value:x(St),autoHide:!1,escape:!1,class:"min-w-80"},void 0,{bottom:!0}]])]),l(u,{onClick:e[51]||(e[51]=m=>G("market")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(Qe,{modelValue:n.value.market,"onUpdate:modelValue":e[52]||(e[52]=m=>n.value.market=m),name:"market",options:Se.value,optionLabel:"label",optionValue:"value",placeholder:"请选择选币范围(现货/合约)",minSelectedLabels:1,maxSelectedLabels:3,class:"w-full",size:"small",filter:"","selected-items-label":((Ue=(Fe=n.value)==null?void 0:Fe.market)==null?void 0:Ue.length)===Se.value.length?"全选":`选了${(Ae=(Me=n.value)==null?void 0:Me.market)==null?void 0:Ae.length}个`,emptyFilterMessage:"无匹配结果",emptyMessage:"暂无数据"},null,8,["modelValue","options","selected-items-label"]),t("ul",No,[(o(!0),p(N,null,ge(n.value.market,(m,s)=>(o(),p("li",To,J(m)+": "+J(x(Lt)[m])+"。 ",1))),256))])])):y("",!0),n.value.long_cap_weight?(o(),p("div",jo,[t("div",Po,[t("div",Fo,[e[109]||(e[109]=t("span",{class:"font-bold"},"多头权重 - 候选项",-1)),e[110]||(e[110]=t("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),h(t("i",Uo,null,512),[[U,{value:"多头权重：多头在子策略的仓位占比，如1表示纯多策略",autoHide:!1,escape:!1,class:"min-w-90"}]])]),l(u,{onClick:e[53]||(e[53]=m=>G("long_cap_weight")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(Le,{modelValue:n.value.long_cap_weight,"onUpdate:modelValue":e[54]||(e[54]=m=>n.value.long_cap_weight=m),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入0-1之间的小数(包括0和1)，按回车添加",onValueChange:e[55]||(e[55]=m=>ye(m,"long_cap_weight")),class:"w-full"},null,8,["modelValue"])])):y("",!0),n.value.short_cap_weight?(o(),p("div",Mo,[t("div",Ao,[t("div",Ho,[e[111]||(e[111]=t("span",{class:"font-bold"},"空头权重 - 候选项",-1)),e[112]||(e[112]=t("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),h(t("i",Ro,null,512),[[U,{value:"空头权重：空头在子策略的仓位占比，如1表示纯空策略",autoHide:!1,escape:!1,class:"min-w-90"}]])]),l(u,{onClick:e[56]||(e[56]=m=>G("short_cap_weight")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(Le,{modelValue:n.value.short_cap_weight,"onUpdate:modelValue":e[57]||(e[57]=m=>n.value.short_cap_weight=m),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入0-1之间的小数(包括0和1)，按回车添加",onValueChange:e[58]||(e[58]=m=>ye(m,"short_cap_weight")),class:"w-full"},null,8,["modelValue"])])):y("",!0),n.value.long_select_coin_num?(o(),p("div",Eo,[t("div",qo,[t("div",Jo,[e[113]||(e[113]=t("span",{class:"font-bold"},"多头选币数量 - 候选项",-1)),e[114]||(e[114]=t("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),h(t("i",Zo,null,512),[[U,{value:"多头选币数量：支持整数（如10）、小数（如0.5）、区间（如1,5）。整数表示选币数量，小数表示选币比例，区间表示选币数量范围。",autoHide:!1,escape:!1,class:"min-w-90"}]])]),l(u,{onClick:e[59]||(e[59]=m=>G("long_select_coin_num")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(Le,{modelValue:n.value.long_select_coin_num,"onUpdate:modelValue":e[60]||(e[60]=m=>n.value.long_select_coin_num=m),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入整数、小数或区间（如1,5），按回车添加",onValueChange:e[61]||(e[61]=m=>ye(m,"long_select_coin_num")),class:"w-full"},null,8,["modelValue"])])):y("",!0),n.value.short_select_coin_num?(o(),p("div",Wo,[t("div",Ko,[t("div",Xo,[e[115]||(e[115]=t("span",{class:"font-bold"},"空头选币数量 - 候选项",-1)),e[116]||(e[116]=t("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),h(t("i",Yo,null,512),[[U,{value:"空头选币数量：支持整数（如10）、小数（如0.5）、long_nums(和多头选币数量一致)、区间（如1,5）。整数表示选币数量，小数表示选币比例，区间表示选币数量范围。",autoHide:!1,escape:!1,class:"min-w-90"}]])]),l(u,{onClick:e[62]||(e[62]=m=>G("short_select_coin_num")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(Le,{modelValue:n.value.short_select_coin_num,"onUpdate:modelValue":e[63]||(e[63]=m=>n.value.short_select_coin_num=m),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入整数、小数、long_nums或区间（如1,5），按回车添加",onValueChange:e[64]||(e[64]=m=>ye(m,"short_select_coin_num")),class:"w-full"},null,8,["modelValue"])])):y("",!0)],64)):y("",!0),n.value.select_num?(o(),p("div",Go,[t("div",Qo,[t("div",ei,[t("div",ti,[e[117]||(e[117]=t("span",{class:"font-bold"},"选股数量 - 候选项",-1)),e[118]||(e[118]=t("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),h(t("i",li,null,512),[[U,{value:"选股数量，可以是整数，如10就是选股10只。也可以是小数，如0.1就是选全市场10%的股票，约500+只。",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(u,{onClick:e[65]||(e[65]=m=>G("select_num")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(Le,{modelValue:n.value.select_num,"onUpdate:modelValue":e[66]||(e[66]=m=>n.value.select_num=m),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入整数或0-1之间的小数，按回车添加",onValueChange:e[67]||(e[67]=m=>ye(m,"select_num")),class:"w-full"},null,8,["modelValue"])])])):y("",!0),n.value.rebalance_time?(o(),p("div",ai,[t("div",si,[t("div",oi,[e[119]||(e[119]=t("span",{class:"font-bold"},"换仓时间 - 候选项",-1)),h(t("i",ii,null,512),[[U,{value:"换仓时机，根据持仓周期和offset交易时，在股票开始时间具体什么时刻卖出和买入。<br/>隔日换仓：'close-open'：offset结束日收盘前卖出，offset开始日开盘后买入；<br/>开盘日内换仓：'open'：offset当天实现换仓，开盘后先卖出再买入；<br/>指定时间换仓：按照5分钟为间隔指定交易日内换仓时间，如'0955-0955'是上午9:55先卖出，再买入。",autoHide:!1,escape:!1,class:"min-w-85"},void 0,{bottom:!0}]])]),l(u,{onClick:e[68]||(e[68]=m=>G("rebalance_time")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(Qe,{modelValue:n.value.rebalance_time,"onUpdate:modelValue":e[69]||(e[69]=m=>n.value.rebalance_time=m),name:"rebalance_time",options:z.value,placeholder:"请选择换仓时间（多选）",minSelectedLabels:1,class:"w-full",size:"small",filter:"",maxSelectedLabels:5,"selected-items-label":((He=n.value.rebalance_time)==null?void 0:He.length)===z.value.length?"全部时间":`选择了${(Re=n.value.rebalance_time)==null?void 0:Re.length}个换仓时间`,emptyFilterMessage:"无匹配结果",emptyMessage:"暂无数据"},null,8,["modelValue","options","selected-items-label"])])):y("",!0),n.value.limit?(o(),p("div",ni,[t("div",ri,[t("div",ui,[e[120]||(e[120]=t("span",{class:"font-semibold"},"择时阈值(limit) - 候选项",-1)),e[121]||(e[121]=t("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),h(t("i",ci,null,512),[[U,{value:"择时信号计算的选股范围，有三种形式：0，小数和整数。<br/>0，代表全市场（选股策略过滤过的全市场）。<br/>小数，如0.2代表全市场的20%。<br/>整数，如200代表200只股票。<br/>",autoHide:!1,escape:!1,class:"min-w-85"}]])]),l(u,{onClick:e[70]||(e[70]=m=>G("limit")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(Le,{modelValue:n.value.limit,"onUpdate:modelValue":e[71]||(e[71]=m=>n.value.limit=m),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入整数或0-1之间的小数，按回车添加",onValueChange:e[72]||(e[72]=m=>ye(m,"limit")),class:"w-full"},null,8,["modelValue"])])):y("",!0)]),j.value.length>0?(o(),p("div",di,[l(Be,{class:"m-0"}),e[125]||(e[125]=t("span",{class:"font-bold text-primary-600 dark:text-primary-500 mb-2 block"},"因子参数遍历",-1)),t("div",mi,[(o(!0),p(N,null,ge(j.value,m=>(o(),p("div",{key:m.id,class:"flex flex-col gap-y-2 p-3 bg-white dark:bg-neutral-700/50 border-1 border-primary-50 dark:border-0 rounded-md shadow-sm"},[t("div",pi,[t("div",fi,[t("span",{innerHTML:x(vt)(m.parsed,i.value)},null,8,vi),h(t("i",gi,null,512),[[U,{value:`该参数对应${m.parsed.paramsName}中第${m.parsed.row+1}行第${m.parsed.col+1}列的参数，支持输入多个候选项（数字或字符串类型是按回车添加）`,autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(u,{onClick:s=>ve(m.id,!0),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"},null,8,["onClick"])]),t("div",_i,[l(ae,{modelValue:m.valueType,"onUpdate:modelValue":s=>m.valueType=s,options:le.value,optionLabel:"label",optionValue:"value",optionDisabled:"disabled",size:"small",class:"min-w-20 h-fit",placeholder:"请选择参数类型",onValueChange:s=>Ie(s,m.id)},null,8,["modelValue","onUpdate:modelValue","options","onValueChange"]),m.valueType==="boolean"?(o(),$(Qe,{key:0,modelValue:m.candidates,"onUpdate:modelValue":s=>m.candidates=s,options:Oe.value,"option-label":"label","option-value":"value",placeholder:"请选择参数类型（多选）",minSelectedLabels:1,size:"small",emptyFilterMessage:"无匹配结果",emptyMessage:"暂无数据"},null,8,["modelValue","onUpdate:modelValue","options"])):m.valueType==="object"&&m.candidates?(o(),p("div",yi,[t("div",xi,[e[122]||(e[122]=t("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"起始值",-1)),l(_,{modelValue:m.candidates.start,"onUpdate:modelValue":s=>m.candidates.start=s,min:0,mode:"decimal",showButtons:"",size:"small",onBlur:s=>F(m.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),t("div",bi,[e[123]||(e[123]=t("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"结束值(包含起始值，不包含结束值)",-1)),l(_,{modelValue:m.candidates.end,"onUpdate:modelValue":s=>m.candidates.end=s,min:0,mode:"decimal",showButtons:"",size:"small",onBlur:s=>F(m.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),t("div",hi,[e[124]||(e[124]=t("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"步长",-1)),l(_,{modelValue:m.candidates.step,"onUpdate:modelValue":s=>m.candidates.step=s,min:0,mode:"decimal",showButtons:"",size:"small",onBlur:s=>F(m.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])])])):(o(),$(Le,{key:2,modelValue:m.candidates,"onUpdate:modelValue":s=>m.candidates=s,name:`dynamic_${m.id}`,multiple:"",fluid:"",typeahead:!1,size:"small",onValueChange:s=>T(s,m.id,m.valueType),placeholder:"输入参数值,按回车添加"},null,8,["modelValue","onUpdate:modelValue","name","onValueChange"]))]),m.error?(o(),$(Gt,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1 mb-0"},{default:b(()=>[E(J(m.error),1)]),_:2},1024)):y("",!0)]))),128))])])):y("",!0)],2)])]}),_:1})])]),_:1},8,["visible"]),l(tl,{group:"editBatch"})],64)}}}),Ci={class:"px-5 py-3"},ki={class:"px-4 py-2 space-y-3"},Ii={class:"font-semibold flex justify-between items-center"},Si={class:"flex items-center gap-2"},Li=["innerHTML"],$i={class:"space-y-8"},Vi={class:"flex flex-col gap-y-2"},Oi={class:"text-sm flex items-center gap-1"},Bi={class:"font-bold"},Di={key:0,class:"flex flex-col gap-y-2"},zi={class:"flex flex-col gap-y-2"},Ni={key:1},Ti={class:"flex gap-2"},ji={class:"text-sm flex items-center gap-1"},Pi={class:"font-bold"},Fi={class:"flex justify-between items-center"},Ui={class:"text-xs text-gray-500 dark:text-gray-300"},Mi={class:"space-x-2"},Ai=_t({__name:"traversalConfig",props:{currentTraverSalName:{}},emits:["refreshConfigInfo"],setup(a,{expose:r,emit:S}){const B=yt(),W=f(),g=S,te=f([]),be=f(qe),pe=f(qe),i=f(tt),ie=f(!1),ne=f(!1),w=f({main_factor:"",sub_factor:"",factor_dict:{},filter_list:[],mode:"",strategy_info:{strategy_name:0,start_time:void 0,end_time:void 0,add_factor_main_list:[],add_factor_sub_list:[]},param_search_info:{param_x:"",param_y:"",evaluation_indicator:"",limit_dict:{}},strategy_results:[]}),M=f([]),C=f(null),ee=f(!1),de=f();jt(async()=>{const I=await _l();I.result===!0?te.value=I.data:te.value=[]});const De=(I,v)=>{be.value=JSON.parse(JSON.stringify(I)),pe.value=JSON.parse(JSON.stringify(I)),i.value=JSON.parse(JSON.stringify(v)),ie.value=!1,oe()},oe=()=>{M.value=[];let I=Vt;if(i.value){let v=i.value.strategy_info,D=i.value;Object.keys(D).map(k=>{k.includes("[")&&D[k]!==null?M.value.push({label:vt(lt(k),v,!1),value:k}):!["name","search_name","strategy_info"].includes(k)&&D[k]!==null&&M.value.push({label:I[k]||k,value:k})})}},re=()=>{var I;W.value&&((I=W.value)==null||I.openDrawer(i.value.strategy_info,i.value,me(i.value.strategy_info.strategy)))},me=I=>{let v=!1;return v=te.value.includes(I),v},ue=Ze(()=>{const I=Math.max(...Object.values(i.value).map(k=>at(k)==="object"?Array.from({length:Math.ceil((k.end-k.start)/k.step)},(H,n)=>k.start+n*k.step).length:Array.isArray(k)?k.length:0));let v=Vt,D=JSON.parse(JSON.stringify(i.value));return delete D.name,delete D.search_name,delete D.strategy_info,Object.entries(D).map(([k,H])=>{H===null&&delete D[k]}),Object.entries(D).map(([k,H])=>{let n={属性:"",参数:""};return k.includes("[")?n={属性:`${vt(lt(k),i.value.strategy_info)}`,参数:k}:n={属性:v[k]||k,参数:k},at(H)==="object"&&(H=Array.from({length:Math.ceil((H.end-H.start)/H.step)},(j,P)=>H.start+P*H.step)),[...Array(I)].forEach((j,P)=>{const le=H[P];n[`候选项${P+1}`]=Array.isArray(le)?le.map(Oe=>Oe.toString()).join(","):(le==null?void 0:le.toString())??""}),n})}),he=Ze(()=>ue.value.length?Object.keys(ue.value[0]).filter(I=>I.startsWith("候选项")):[]),_e=async({values:I})=>{const v={};w.value.param_search_info.param_x||(v.param_x=[{message:"分析参数是必选项"}]),w.value.param_search_info.evaluation_indicator||(v.evaluation_indicator=[{message:"分析指标是必选项"}]),ne.value?(w.value.param_search_info.param_y||(v.param_y=[{message:"Y轴参数是必选项"}]),w.value.param_search_info.param_x&&w.value.param_search_info.param_y&&w.value.param_search_info.param_x===w.value.param_search_info.param_y&&(v.param_x=[{message:"X轴和Y轴参数不能相同"}],v.param_y=[{message:"X轴和Y轴参数不能相同"}])):w.value.param_search_info.param_y="";const D=w.value.param_search_info.limit_dict;return D&&Object.entries(D).forEach(([k,H])=>{H||(v[`${k}`]=[{message:`请为${ft(k,i.value.strategy_info)}选择一个固定值`}])}),{values:I,errors:v}},fe=(I,v)=>{I===!1?(w.value={...JSON.parse(JSON.stringify(w.value)),param_search_info:{param_x:v,param_y:"",evaluation_indicator:"",limit_dict:{}}},R()):w.value={...JSON.parse(JSON.stringify(w.value)),param_search_info:{param_x:"",param_y:"",evaluation_indicator:"",limit_dict:{}}},de.value=bl(i.value),ne.value=I,ie.value=!0},q=()=>{var I;(I=C.value)==null||I.submit()},we=async({valid:I})=>{if(I){ee.value=!0;let v=Ot.tool2;if((await hl(v,w.value)).result===!0){B.add({severity:"success",summary:"保存成功！",life:3e3});const k=await wl(v);ee.value=!1,k.result===!0&&(B.add({severity:"success",summary:"运行成功！",life:3e3}),ie.value=!1)}else ee.value=!1}},R=()=>{const I=Cl(i.value,w.value);w.value.param_search_info.limit_dict||(w.value.param_search_info.limit_dict={}),I&&typeof I=="object"&&Object.keys(I).forEach(v=>{Object.hasOwn(w.value.param_search_info.limit_dict,v)&&(Array.isArray(w.value.param_search_info.limit_dict[v])?I[v]=w.value.param_search_info.limit_dict[v][0]:I[v]=w.value.param_search_info.limit_dict[v])}),w.value.param_search_info.limit_dict=I};return r({loadData:De}),(I,v)=>{const D=ht,k=wt,H=El,n=Rl,j=bt,P=Ut,le=Ct,Oe=Ft,Se=Pt,je=xt;return o(),p(N,null,[t("div",Ci,[l(j,{class:"border-1 border-gray-100 dark:border-neutral-700",pt:{body:{class:"pt-0"}}},{header:b(()=>[t("div",ki,[t("div",Ii,[v[7]||(v[7]=t("span",{class:"text-primary-600 dark:text-primary-50"},"策略遍历配置",-1)),t("div",Si,[I.currentTraverSalName==="config"?h((o(),$(D,{key:0,icon:"pi pi-caret-right",size:"small",variant:"outlined",class:"text-xs px-1.5 py-1 gap-0.5",label:"生成热力图",disabled:M.value.length<2,onClick:v[0]||(v[0]=F=>fe(!0))},null,8,["disabled"])),[[je,{value:M.value.length<2?"至少遍历两个参数才能生成热力图":"",autoHide:!1,escape:!1,class:"min-w-54"}]]):y("",!0),l(D,{icon:"pi pi-cog",size:"small",variant:"outlined",class:"py-1 px-2",label:"设置",onClick:re})])]),l(k,{class:"m-0"})])]),content:b(()=>[l(n,{value:ue.value,class:"text-xs",responsiveLayout:"scroll",pt:{headerRow:{class:"text-sm"}},scrollable:""},{empty:b(()=>v[8]||(v[8]=[t("div",{class:"flex items-center justify-center h-full"},[t("img",{src:gt,class:"w-40 h-auto"})],-1)])),default:b(()=>[l(H,{field:"属性",header:"属性",frozen:"",class:"min-w-35 font-semibold z-10"},{body:b(({data:F})=>[t("div",{innerHTML:F.属性,class:"leading-5"},null,8,Li)]),_:1}),I.currentTraverSalName==="config"?(o(),$(H,{key:0,field:"操作",header:"操作",class:"min-w-45 font-semibold"},{body:b(({data:F})=>[l(D,{size:"small",icon:"pi pi-caret-right",variant:"outlined",class:"text-xs px-1.5 py-1 gap-0.5",label:"生成参数平原图",onClick:z=>fe(!1,F.参数)},null,8,["onClick"])]),_:1})):y("",!0),l(H,{field:"参数",header:"参数"}),(o(!0),p(N,null,ge(he.value,F=>(o(),$(H,{key:F,field:F,header:F,class:"min-w-30"},null,8,["field","header"]))),128))]),_:1},8,["value"])]),_:1})]),l(wi,{allConfigInfo:pe.value,ref_key:"refEditBatchTmpl",ref:W,onRefreshConfigInfo:v[1]||(v[1]=F=>g("refreshConfigInfo"))},null,8,["allConfigInfo"]),l(Se,{visible:ie.value,"onUpdate:visible":v[6]||(v[6]=F=>ie.value=F),modal:!0,draggable:!1,header:ne.value?"生成热力图":"生成参数平原图",class:"max-w-[90vw] min-w-[40vw]"},{default:b(()=>[t("div",$i,[l(Oe,{resolver:_e,ref_key:"refForm",ref:C,onSubmit:we,class:"flex-1 flex flex-col space-y-3"},{default:b(F=>{var z,d,Z;return[t("div",Vi,[t("label",Oi,[v[9]||(v[9]=t("span",{class:"text-red-500"},"*",-1)),t("span",Bi,J(ne.value?"X轴参数":"分析参数"),1)]),l(P,{size:"small",name:"param_x",modelValue:w.value.param_search_info.param_x,"onUpdate:modelValue":v[2]||(v[2]=L=>w.value.param_search_info.param_x=L),optionLabel:"label",optionValue:"value",placeholder:"请选择要分析的参数",checkmark:"",highlightOnSelect:!1,class:"w-full",options:M.value,showClear:"",disabled:!ne.value,onValueChange:R},null,8,["modelValue","options","disabled"]),(z=F.param_x)!=null&&z.invalid?(o(),$(le,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1"},{default:b(()=>{var L;return[E(J((L=F.param_x.error)==null?void 0:L.message),1)]}),_:2},1024)):y("",!0)]),ne.value?(o(),p("div",Di,[v[10]||(v[10]=t("label",{class:"text-sm space-x-1"},[t("span",{class:"text-red-500"},"*"),t("span",{class:"font-bold"},"Y轴参数"),t("span",{class:"text-xs text-gray-500 dark:text-gray-300"})],-1)),l(P,{size:"small",name:"param_y",modelValue:w.value.param_search_info.param_y,"onUpdate:modelValue":v[3]||(v[3]=L=>w.value.param_search_info.param_y=L),optionLabel:"label",optionValue:"value",placeholder:"请选择要分析的参数",checkmark:"",highlightOnSelect:!1,options:M.value.filter(L=>L.value!==w.value.param_search_info.param_x),onValueChange:R,class:"w-full",showClear:""},null,8,["modelValue","options"]),(d=F.param_y)!=null&&d.invalid?(o(),$(le,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1"},{default:b(()=>{var L;return[E(J((L=F.param_y.error)==null?void 0:L.message),1)]}),_:2},1024)):y("",!0)])):y("",!0),t("div",zi,[v[11]||(v[11]=t("label",{class:"text-sm flex items-center gap-1"},[t("span",{class:"text-red-500"},"*"),t("span",{class:"font-bold"},"分析指标")],-1)),l(P,{size:"small",name:"evaluation_indicator",modelValue:w.value.param_search_info.evaluation_indicator,"onUpdate:modelValue":v[4]||(v[4]=L=>w.value.param_search_info.evaluation_indicator=L),options:x(yl),placeholder:"请选择分析指标",checkmark:"",filter:"",highlightOnSelect:!1,class:"w-full",showClear:""},null,8,["modelValue","options"]),(Z=F.evaluation_indicator)!=null&&Z.invalid?(o(),$(le,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1"},{default:b(()=>{var L;return[E(J((L=F.evaluation_indicator.error)==null?void 0:L.message),1)]}),_:2},1024)):y("",!0)]),w.value.param_search_info.limit_dict&&Object.keys(w.value.param_search_info.limit_dict).length>0?(o(),p("div",Ni,[l(k),v[13]||(v[13]=t("div",{class:"flex items-center gap-2 mb-3"},[t("span",{class:"font-semibold text-gray-700 dark:text-gray-300"},"固定参数设置"),t("span",{class:"text-xs text-gray-500"},"(请为其他参数选择固定值)")],-1)),t("div",Ti,[(o(!0),p(N,null,ge(Object.keys(w.value.param_search_info.limit_dict),L=>{var Ce;return o(),p("div",{class:"flex flex-col gap-y-2 w-full",key:L},[t("label",ji,[v[12]||(v[12]=t("span",{class:"text-red-500"},"*",-1)),t("span",Pi,J(x(ft)(L,i.value.strategy_info)),1)]),l(P,{size:"small",name:L,modelValue:w.value.param_search_info.limit_dict[L],"onUpdate:modelValue":ke=>w.value.param_search_info.limit_dict[L]=ke,options:de.value[L],placeholder:`请选择${x(ft)(L,i.value.strategy_info)}的固定值`,class:"w-full",showClear:!0},null,8,["name","modelValue","onUpdate:modelValue","options","placeholder"]),(Ce=F[L])!=null&&Ce.invalid?(o(),$(le,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1"},{default:b(()=>{var ke;return[E(J((ke=F[L].error)==null?void 0:ke.message),1)]}),_:2},1024)):y("",!0)])}),128))])])):y("",!0)]}),_:1},512),t("div",Fi,[t("span",Ui,"分析结果可在工具页面「"+J(x(A)==="coin"?x(Ot).tool2:x(xl).tool4)+"」中查看",1),t("div",Mi,[l(D,{label:"取消",severity:"secondary",size:"small",onClick:v[5]||(v[5]=F=>ie.value=!1)}),l(D,{label:"开始运行",size:"small",onClick:q,loading:ee.value},null,8,["loading"])])])])]),_:1},8,["visible","header"])],64)}}}),Hi={class:"flex items-center justify-between py-3 pl-4 pr-1"},Ri={class:"space-x-1"},Ei={class:"flex-1 w-full min-w-0 space-y-1 font-semibold"},qi={class:"text-xs text-gray-500 dark:text-gray-300 truncate"},Ji={class:"flex-1 overflow-y-auto px-4 mt-1"},Zi={class:"space-y-1"},Wi=["onMouseenter","onClick"],Ki={class:"flex-1 truncate"},Xi={key:1,class:"h-full flex flex-col items-center pt-20 gap-4"},Yi={key:0,class:"flex-1 min-w-0 h-full flex flex-col relative"},Gi={class:"px-4 py-3 flex items-center justify-between sticky left-0 top-0"},Qi={class:"space-x-2"},en={class:"font-semibold"},tn={class:"flex gap-2"},ln={class:"overflow-y-auto overflow-x-hidden"},an={class:"px-5 py-4 space-y-4"},sn={class:"px-5 py-3 space-y-6"},on={key:1,class:"flex-1 min-w-0 h-full flex flex-col justify-center items-center gap-4"},nn={class:"flex flex-col gap-2"},rn={class:"flex items-center"},un={class:"flex flex-col gap-2 pl-2"},cn={class:"space-x-3 w-full flex justify-end"},dn={class:"flex items-center justify-between w-full"},mn={class:"text-xs text-gray-500 dark:text-gray-300 flex items-center gap-2"},pn={class:"space-x-3"},fn={key:0,class:"fixed inset-0 bg-black/20 z-50 flex items-center justify-center"},vn={class:"bg-white dark:bg-neutral-800 p-8 rounded-lg shadow-2xl flex flex-col items-center"},gn={class:"flex flex-col gap-6 px-8 py-4"},kn=_t({__name:"traversal.page",setup(a){const r=yt(),S=Nt(),B=f(null),W=f(null),g=f(null),te=f(null),be=f(null),pe=f(null),i=f(null),ne=Object.values([Oa,Ba,Da,za]),w=f([]),M=f([]),C=f(""),ee=f(qe),de=f(""),De=f(),oe=f(null),re=f(!1),me=f(!1),ue=f(!1),he=f(!1),_e=f(null),fe=f(!1);f(!1),f(!1);const q=f(tt),we=f(!1);jt(()=>{R()});const R=async()=>{var d,Z;const z=await kl();z.result===!0&&(M.value=((d=z.data)==null?void 0:d.configs)||[],w.value=((Z=z.data)==null?void 0:Z.configs.filter(L=>L!=="config"))||[]),M.value.length>0&&M.value.includes("config")?v("config"):M.value.length>0&&v(M.value[0])},I=async()=>{const z=await $l("config");z.result===!0?ee.value={...JSON.parse(JSON.stringify(qe)),...JSON.parse(JSON.stringify(z.data)),name:"config"}:ee.value={...JSON.parse(JSON.stringify(qe)),name:"config"},k()},v=z=>{C.value=z,D(z)},D=async z=>{I();const d=await Il(encodeURIComponent(z));d.result===!0&&(q.value={...JSON.parse(JSON.stringify(tt)),...d.data},z==="config"&&(de.value=q.value.search_name)),k()},k=()=>{var z,d,Z,L,Ce;g.value&&((z=g.value)==null||z.loadData(ee.value,q.value)),B.value&&((d=B.value)==null||d.loadData(ee.value)),W.value&&((Z=W.value)==null||Z.loadData(ee.value)),te.value&&((L=te.value)==null||L.loadData(ee.value)),be.value&&((Ce=be.value)==null||Ce.loadData(ee.value))},H=Ze(()=>[{label:"复制配置",icon:"pi pi-copy",command:()=>{pe.value&&pe.value.openDialog(C.value,q.value.search_name)},class:C.value==="无名称配置"?"hidden":""},{label:"删除",icon:"pi pi-trash",command:()=>{n()},class:C.value==="config"||M.value.length===0?"hidden":""}]),n=async()=>{if(C.value==="config"){r.add({severity:"warn",summary:"当前策略正在使用中不可删除！",life:3e3});return}S.require({group:C.value,header:"删除",message:`你确定要删除「${C.value}」吗?`,icon:"pi pi-info-circle",rejectProps:{label:"取消",severity:"secondary",outlined:!0},acceptProps:{label:"删除",severity:"danger"},accept:async()=>{if(C.value==="无名称配置"){R(),r.add({severity:"success",summary:"删除成功",life:3e3});return}(await Sl(C.value)).result===!0&&(r.add({severity:"success",summary:"删除成功",life:3e3}),R())},reject:()=>{}})},j=z=>{Tt(()=>{De.value.toggle(z)})},P=async()=>{me.value=!0,M.value.includes("config")?(await Vl("config",Ol([...w.value],de.value))).result===!0?(r.add({severity:"success",summary:"复制成功",life:3e3}),le()):me.value=!1:le()},le=async()=>{const z=await Bl(encodeURIComponent(C.value));me.value=!1,z.result===!0&&(re.value=!1,r.add({severity:"success",summary:`配置 "${C.value}" 已成功启用`,life:3e3}),R())},Oe=()=>{fe.value=!1,ue.value=!0,Se(),_e.value=setTimeout(()=>{fe.value=!0},5e3)},Se=()=>{_e.value&&(clearTimeout(_e.value),_e.value=null)},je=()=>{Se(),fe.value=!0},F=async()=>{ue.value=!1,he.value=!0;try{(await Dl()).result===!0&&r.add({severity:"success",summary:"遍历完成",life:3e3})}finally{he.value=!1}};return Ll(()=>{Se()}),(z,d)=>{const Z=ht,L=wt,Ce=bt,ke=ra,st=Mt,Xe=Jl,Ye=Ct,ot=na,it=ql,Pe=Pt,Ge=Ql,nt=Jt,ye=xt;return o(),p(N,null,[l(ot,{class:"w-full h-screen overflow-hidden flex"},{default:b(()=>[l(ke,{size:18,class:"min-w-[232px]"},{default:b(()=>[l(Ce,{class:"max-h-full border-0 rounded-none shadow-none",pt:{body:{class:"flex-1 p-0 pb-2 min-h-0"},content:{class:"h-full min-h-0 flex flex-col"}}},{header:b(()=>[t("div",Hi,[d[18]||(d[18]=t("span",{class:"font-semibold"},"策略遍历配置库",-1)),t("div",Ri,[h(l(Z,{icon:"pi pi-plus",variant:"outlined",size:"small",severity:"secondary",onClick:d[0]||(d[0]=T=>we.value=!0)},null,512),[[ye,"新增遍历配置",void 0,{left:!0}]])])])]),content:b(()=>[l(L,{class:"m-0"}),M.value&&M.value.length>0?(o(),p(N,{key:0},[M.value&&M.value.includes("config")?(o(),p("div",{key:0,onMouseenter:d[2]||(d[2]=T=>oe.value="config"),onMouseleave:d[3]||(d[3]=T=>oe.value=null),onClick:d[4]||(d[4]=T=>v("config")),class:Je(["pl-7 pr-1 h-14 flex justify-between items-center gap-2 cursor-pointer py-2 bg-gray-50 hover:bg-primary-50 text-gray-700 hover:text-primary-600 dark:bg-neutral-900 dark:hover:bg-primary-900 dark:text-gray-300 dark:hover:text-primary-100",C.value==="config"?"text-primary-600 bg-primary-50 dark:text-primary-100 dark:bg-primary-900":""])},[t("div",Ei,[d[19]||(d[19]=t("div",null,"当前配置",-1)),h((o(),p("div",qi,[E(J(de.value),1)])),[[ye,de.value]])]),oe.value==="config"||C.value==="config"?(o(),$(Z,{key:0,icon:"pi pi-ellipsis-v",severity:"secondary",text:"","aria-haspopup":"true","aria-controls":"overlay_menu",onClick:d[1]||(d[1]=T=>j(T)),size:"small",class:"w-7 h-7 bg-transparent hover:bg-gray-200 dark:hover:bg-neutral-900"})):y("",!0)],34)):y("",!0),t("div",Ji,[t("ul",Zi,[(o(!0),p(N,null,ge(w.value,T=>(o(),p("li",{onMouseenter:Ie=>oe.value=T,onMouseleave:d[6]||(d[6]=Ie=>oe.value=null),onClick:Ie=>v(T),key:T,class:Je(["h-11 flex justify-between items-center gap-2 font-medium text-sm cursor-pointer pl-3 pr-1 py-2 hover:bg-primary-50 text-gray-700 hover:text-primary-600 dark:bg-neutral-900 dark:hover:bg-primary-900 dark:text-gray-300 dark:hover:text-primary-100 rounded-md",C.value===T?"text-primary-600 bg-primary-50 dark:text-primary-100 dark:bg-primary-900":""])},[h((o(),p("span",Ki,[E(J(T),1)])),[[ye,T]]),oe.value===T||C.value===T?(o(),$(Z,{key:0,icon:"pi pi-ellipsis-v",severity:"secondary","aria-haspopup":"true","aria-controls":"overlay_menu",onClick:d[5]||(d[5]=Ie=>j(Ie)),size:"small",class:"w-7 h-7 bg-transparent hover:bg-gray-200 dark:hover:bg-neutral-900"})):y("",!0)],42,Wi))),128))])])],64)):(o(),p("div",Xi,d[20]||(d[20]=[t("img",{src:gt,class:"w-30 h-auto"},null,-1),t("div",{class:"space-y-1 flex flex-col items-center"},[t("span",{class:"text-gray-500 text-sm"},"暂无配置"),t("span",{class:"text-primary-500 text-xs"},"点击 + 按钮查看新增遍历配置教程")],-1)])))]),_:1})]),_:1}),l(ke,{size:82},{default:b(()=>[M.value&&M.value.length>0?(o(),p("div",Yi,[t("div",Gi,[t("div",Qi,[t("span",en,J(q.value.search_name),1)]),t("div",tn,[C.value==="config"?(o(),$(st,{key:0,size:"small",severity:"success",class:"flex items-center gap-1 font-medium"},{default:b(()=>d[21]||(d[21]=[E(" 已启用")])),_:1,__:[21]})):C.value!=="无名称配置"?(o(),$(Z,{key:1,size:"small",onClick:d[7]||(d[7]=T=>re.value=!0)},{default:b(()=>d[22]||(d[22]=[E("启用")])),_:1,__:[22]})):y("",!0),C.value==="config"?(o(),$(Z,{key:2,size:"small",class:"shadow-lg",onClick:Oe},{default:b(()=>d[23]||(d[23]=[E("寻找最优参数")])),_:1,__:[23]})):y("",!0),l(Xe,{group:"backTest",pt:{root:{class:"max-w-[90vw] sm:max-w-[600px]"}}})])]),l(L,{class:"m-0"}),t("div",ln,[C.value==="无名称配置"?(o(),$(Ye,{key:0,severity:"warn",closable:!1,class:"inline-flex"},{default:b(()=>d[24]||(d[24]=[t("div",{class:"space-y-2"},[t("div",{class:"flex items-center font-semibold gap-2"},[t("i",{class:"pi pi-exclamation-circle"}),E("重要提示 ")]),t("ul",{class:"list-disc space-y-1 text-sm pl-5",role:"list"},[t("li",null," 编辑「策略遍历配置」前，请先确保已填写配置名称，否则保存将失败。 "),t("li",null," 请确保策略遍历配置中至少有一个参数设置了候选值，否则无法保存。 ")])],-1)])),_:1,__:[24]})):y("",!0),l(Ai,{ref_key:"refTraversalConfigTmpl",ref:g,currentTraverSalName:C.value,onRefreshConfigInfo:d[8]||(d[8]=T=>D(C.value))},null,8,["currentTraverSalName"]),l(L,{class:"m-0"}),t("div",an,[d[25]||(d[25]=t("div",{class:"text-primary-500 font-semibold"}," 当前 config.py 文件的相关配置信息 ",-1)),l(Kl,{ref_key:"refStrategyOtherConfigTmpl",ref:W,onRefreshConfigInfo:d[9]||(d[9]=T=>D(C.value))},null,512)]),t("div",sn,[l(Xl,{ref_key:"refDataConfigTmpl",ref:B,onRefreshConfigInfo:d[10]||(d[10]=T=>D(C.value))},null,512),l(Yl,{ref_key:"refBackTestSimulationConfigTmpl",ref:te,onRefreshConfigInfo:d[11]||(d[11]=T=>D(C.value))},null,512),l(Gl,{ref_key:"refOtherConfifTmpl",ref:be,onRefreshConfigInfo:d[12]||(d[12]=T=>D(C.value))},null,512)])])])):(o(),p("div",on,d[26]||(d[26]=[t("img",{src:gt,class:"w-30 h-auto"},null,-1),t("span",{class:"text-gray-500 text-sm"},"暂无配置信息",-1)])))]),_:1})]),_:1}),l(it,{ref_key:"refMenu",ref:De,model:H.value,popup:!0,class:"min-w-35"},null,8,["model"]),l(Xe,{group:C.value},null,8,["group"]),l(Zl,{configNameList:[...w.value,de.value],title:"遍历",configType:"traversal",ref_key:"refCopyConfigDialogTmpl",ref:pe,onRefreshConfigInfo:R},null,8,["configNameList"]),l(Wl,{title:"遍历文件",maxFileSize:1*1024*1024,fileType:".py",ref_key:"refUploadConfigDialogTmpl",ref:i,onRefreshConfigInfo:R},null,512),l(Pe,{header:"启用确认",visible:re.value,closable:!1,draggable:!1,modal:!0,onHide:d[14]||(d[14]=T=>re.value=!1),class:"max-w-[90vw]",pt:{footer:"justify-between items-center"}},{footer:b(()=>[t("div",cn,[l(Z,{label:"取消启用",severity:"secondary",onClick:d[13]||(d[13]=T=>re.value=!1)}),l(Z,{label:"确定启用",class:"p-button-primary",loading:me.value,onClick:P},null,8,["loading"])])]),default:b(()=>[t("div",nn,[t("div",rn,[d[27]||(d[27]=t("i",{class:"pi pi-question-circle mr-2 text-xl"},null,-1)),E("确定要启用「"+J(q.value.search_name)+"」这个配置吗？ ",1)]),t("div",un,[d[29]||(d[29]=t("div",{class:"text-sm text-gray-500 dark:text-gray-300"}," 系统会自动为你备份当前已启用的配置文件，以便你随时可以恢复。 ",-1)),l(Ye,{severity:"warn",icon:"pi pi-exclamation-triangle",variant:"simple",class:"mb-0",pt:{text:"text-sm"}},{default:b(()=>d[28]||(d[28]=[E(" 启用新的遍历配置后，系统将自动清理之前的工具配置信息 ")])),_:1,__:[28]})])])]),_:1},8,["visible"]),l(Pe,{header:"寻找最优参数提示",visible:ue.value,closable:!1,draggable:!1,modal:!0,onHide:d[16]||(d[16]=T=>ue.value=!1),class:"w-120",pt:{footer:"justify-between items-center"}},{footer:b(()=>[t("div",dn,[t("div",mn,[fe.value?y("",!0):(o(),p(N,{key:0},[d[30]||(d[30]=E(" 请认真阅读5s后才能点击确定按钮 ")),l(Z,{label:"跳过等待",link:"",class:"p-0 underline",onClick:je})],64))]),t("div",pn,[l(Z,{label:"取消",severity:"secondary",onClick:d[15]||(d[15]=T=>ue.value=!1)}),l(Z,{label:"确定",class:"p-button-primary",disabled:!fe.value,onClick:F},null,8,["disabled"])])])]),default:b(()=>[d[31]||(d[31]=t("ul",{class:"list-disc pl-6 leading-relaxed space-y-1"},[t("li",null,[E(" 建议使用 "),t("span",{class:"text-primary-500 font-semibold"}," PyCharm "),E("启动寻找最优参数（体验更优） ")]),t("li",null," 若使用网页版「寻找最优参数」功能，过程中会占用一定时间，屏幕将暂时锁定 "),t("li",null,"寻找最优参数进行时，请不要刷新页面或执行其他操作，以免影响结果")],-1))]),_:1,__:[31]},8,["visible"]),he.value?(o(),p("div",fn,[t("div",vn,[l(Ge,{class:"mb-4"}),d[32]||(d[32]=t("p",{class:"text-lg font-medium"},"策略遍历进行中，请耐心等待...",-1)),d[33]||(d[33]=t("p",{class:"text-gray-500 dark:text-neutral-400 text-sm mt-2 flex items-center gap-2"},[t("i",{class:"pi pi-exclamation-triangle text-yellow-600"}),E("策略遍历期间请勿刷新页面或关闭浏览器 ")],-1))])])):y("",!0),l(Pe,{header:"新增策略遍历配置教程",visible:we.value,"onUpdate:visible":d[17]||(d[17]=T=>we.value=T),closable:!0,draggable:!1,modal:!0,class:"max-w-[80vw]",pt:{footer:"justify-between items-center"}},{default:b(()=>[t("div",gn,[(o(!0),p(N,null,ge(x(ne),(T,Ie)=>(o(),$(nt,{key:Ie,src:T,alt:`Image ${Ie+1}`,preview:""},null,8,["src","alt"]))),128))])]),_:1},8,["visible"])],64)}}});export{kn as default};
